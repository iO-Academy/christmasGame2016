!function(a){function i(b,c){if(g>5)h.push({elem:b,qname:c});else{for(g+=1,a.dequeue(b,c);h.length>0;){var d=h.shift();a.dequeue(d.elem,d.qname),kd()}g-=1}}function k(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a}function l(b){var c,d,e=b.charAt(0).toUpperCase()+b.slice(1),f=["Moz","Webkit","O","ms"],g=document.createElement("div");if(b in g.style)d=b;else for(var h=0;h<f.length;h++)if(c=f[h]+e,c in g.style){d=c;break}return g=null,a.support[b]=d,d}function m(){var a=document.createElement("div"),b="getBoundingClientRect"in a;return a=null,b}function p(b,c){function n(){for(;l.length&&/^\s/.test(l[l.length-1]);)l.pop();for(;l.length&&/^\s/.test(l[0]);)l.shift();1==l.length&&(/^".*"$/.test(l[0])||/^'.*'$/.test(l[0]))?i=l[0].substr(1,l[0].length-2):2==l.length&&"url"==l[0]&&/^(.*)$/.test(l[1])?i=l[1].substr(1,l[1].length-2):(j=l.join(""),i=""==j?j:isNaN(j)?j:Number(j)),!k&&m&&c&&l.length&&(h=c),h&&(e[h]=i)}if("string"!=typeof b){if(null==b)return{};if(a.isPlainObject(b))return b;b=""+b}var f,g,i,j,d=b.match(/[-a-zA-Z_][-\w]*|"[^"]*"|'[^']'|\([^()]*\)|\s+|./g),e={},h=null,k=!1,l=[],m=!0;for(f=0;f<d.length;++f)g=d[f],k||(!h&&/^[a-zA-Z_-]/.test(g)&&(h=g),":"!=g)?";"!=g?l.push(g):(n(),h=null,l.length=0,k=!1,m=!1):(k=!0,l.length=0);return n(),e}function q(a){function c(a){return/[\s;]/.test(a)?a.indexOf('"')<0?'"'+a+'"':"'"+a+"'":a}var b=[];for(var d in a)a.hasOwnProperty(d)&&b.push(d+":"+c(a[d])+";");return b.join(" ")}function r(a){return a}function s(a,b){var c=[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1]];return 6==a.length&&(c[0]+=a[4],c[1]+=a[5]),c}function t(a,b){var c=[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3]],d=6==a.length;return 6==b.length?(c.push(a[0]*b[4]+a[2]*b[5]+(d?a[4]:0)),c.push(a[1]*b[4]+a[3]*b[5]+(d?a[5]:0))):d&&(c.push(a[4]),c.push(a[5])),c}function u(a){return Math.abs(a)>1e-12}function v(a){return!(u(a[1])||u(a[2])||u(1-a[0])||u(1-a[3]))}function w(a){if(v(a))return[1,0,0,1];var b=E(a);return u(b[2])?t(y(-b[3]),t(z(1/b[1],1/b[2]),y(-b[0]))):null}function x(a){var b=w(a);if(4==a.length)return b;var c=s(b,[-a[4],-a[5]]);return b.push(c[0]),b.push(c[1]),b}function y(a){var b=Math.cos(a),c=Math.sin(a);return[b,c,-c,b]}function z(a,b){return 1==arguments.length&&(a=b),[a,0,0,b]}function A(a,b){return[a[0]+b[0],a[1]+b[1]]}function B(a,b){return[a[0]-b[0],a[1]-b[1]]}function C(a,b){return[a[0]*b,a[1]*b]}function D(a,b,c){return A(s(a,B(b,c)),c)}function E(a){var o,p,b=a[0]*a[0]+a[1]*a[1],c=a[0]*a[2]+a[1]*a[3],d=a[2]*a[2]+a[3]*a[3],e=-.5*Math.atan2(2*c,b-d),f=Math.cos(e),g=Math.sin(e),h=a[0]*f-a[2]*g,i=a[1]*f-a[3]*g,j=Math.atan2(i,h),k=Math.cos(j),l=Math.sin(j),m=(a[1]*g+a[3]*f)*k-(a[0]*g+a[2]*f)*l,n=(a[0]*f-a[2]*g)*k+(a[1]*f-a[3]*g)*l;return e<-Math.PI/4?(e+=Math.PI/2,p=n,o=m,j-=Math.PI/2):(o=n,p=m),j>Math.PI&&(j-=2*Math.PI),[j,o,p,e]}function F(a,b){var c=(b-a)/2,d=Math.cos(c),e=Math.sin(c),f=d,g=-e,h=1+f*d+g*e,i=f*e-g*d,j=i&&4/3*(Math.sqrt(2*h)-h)/i,k=f-j*g,l=g+j*f,m=k,n=-l,o=c+a,p=Math.cos(o),q=Math.sin(o);return[[k*p-l*q,k*q+l*p],[m*p-n*q,m*q+n*p],[Math.cos(b),Math.sin(b)]]}function G(a){var b=Ba(a,!1);if(b)return[b.tx,b.ty];var c=H(a);return c?[c[4],c[5]]:[0,0]}function H(b){var c=window.getComputedStyle?window.getComputedStyle(b)[n]:a.css(b,"transform");if(!c||"none"===c)return null;var d=/^matrix\(([\-+.\de]+),\s*([\-+.\de]+),\s*([\-+.\de]+),\s*([\-+.\de]+),\s*([\-+.\de]+)(?:px)?,\s*([\-+.\de]+)(?:px)?\)$/.exec(c);return d?[parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]),parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])]:K(c)}function I(b,c){var e,f,g,h,i,d="none"===a.css(b,"display");if(d){e={position:"absolute",visibility:"hidden",display:"block"},f={};for(g in e)f[g]=b.style[g],b.style[g]=e[g]}var h=window.getComputedStyle?window.getComputedStyle(b):null,i=h&&h[o]||a.css(b,"transformOrigin");if(d)for(g in e)b.style[g]=f[g];if(i&&i.indexOf("%")<0)return a.map(i.split(" "),parseFloat);if(c)return[c[0]/2,c[1]/2];var j=a(b);return[j.width()/2,j.height()/2]}function J(a){for(var c,b=[1,0,0,1];null!==a;)c=H(a),c&&!v(c)&&(b=t(c,b)),a=a.parentElement;return b.slice(0,4)}function K(b){var c=[1,0,0,1],d=[],e=[],f=/(?:^\s*|)(\w*)\s*\(([^)]*)\)\s*/g,g=b.replace(f,function(b){return d.push(b[1].toLowerCase()),e.push(a.map(b[2].split(","),function(a){var b=a.trim().toLowerCase();return{num:parseFloat(b),unit:b.replace(/^[+-.\de]*/,"")}})),""});if(g)return null;for(var h=d.length-1;h>=0;--h){var j,k,l,i=null,n=d[h],o=e[h];if("matrix"==n)o.length>=6&&(i=[o[0].num,o[1].num,o[2].num,o[3].num,o[4].num,o[5].num]);else if("rotate"==n)1==o.length&&(j=Fa(o[0]),k=Math.cos(j),l=Math.sin(j),i=[k,-l,k,l]);else if("translate"==n||"translatex"==n||"translatey"==n){var p=0,q=0;if(o.length>=1){if(o[0].unit&&"px"!=o[0].unit)return null;if("translate"==n||"translatex"==n?p=o[0].num:"translatey"==n&&(q=o[0].num),"translate"==n&&o.length>=2){if(o[1].unit&&"px"!=o[1].unit)return null;q=o[1].num}i=[0,0,0,0,p,q]}}else if("scale"==n||"scalex"==n||"scaley"==n){var r=1,s=1;o.length>=1&&("scale"==n||"scalex"==n?r=o[0].num:"scaley"==n&&(s=o[0].num),"scale"==n&&o.length>=2&&(s=o[1].num),i=[r,0,0,s,0,0])}else{if("skew"!=n&&"skewx"!=n&&"skewy"!=n)return null;var u=0,v=0;o.length>=1&&("skew"==n||"skewx"==n?u=Math.tan(Fa(o[0])):"skewy"==n&&(v=Math.tan(Fa(o[0]))),"skew"==n&&o.length>=2&&(v=Math.tan(Fa(o[0]))),i=[1,v,u,1,0,0])}c=t(c,i)}return c}function L(a,b,c){if(c<=0)return a;var d=b.pageX-a.pageX,e=b.pageY-a.pageY,f=d*d+e*e;if(c*c>=f)return b;var g=c/Math.sqrt(f);return{pageX:a.pageX+g*d,pageY:a.pageY+g*e}}function M(a,b,c){if(c<=0)b=a;else if(c<180){var d=Ga(b-a);d>c?b=a+c:d<-c&&(b=a-c)}return Ga(b)}function N(a,b,c,d){return{pageX:Math.floor(a+c/2),pageY:Math.floor(b+d/2)}}function O(a,b,c,d){var e=a+c,f=b+d;return[{pageX:a,pageY:b},{pageX:a,pageY:f},{pageX:e,pageY:f},{pageX:e,pageY:b}]}function P(a){if(!/e[\-+]/.exec(a))return a;var b=a.replace(/(?:\d+(?:\.\d*)?|\.\d+)e[\-+]\d+/g,function(a){return Ca(parseFloat(a))});return b}function Q(b,c,d){var e=a.data(b,"turtleData");if(e&&e.quickhomeorigin&&e.down&&e.style&&!d)return e.quickhomeorigin;var j,k,l,m,f="none"===a.css(b,"display"),g=f?{position:"absolute",visibility:"hidden",display:"block"}:{},i=(g[n]=c?"matrix("+a.map(c,Ca).join(", ")+", 0, 0)":"none",{});for(j in g)i[j]=b.style[j],b.style[j]=g[j];k=X(b),l=I(b,[k.width,k.height]);for(j in g)b.style[j]=P(i[j]);d&&(d.gbcr=k,d.localorigin=l);var m=A([k.left,k.top],l);return e&&e.down&&e.style&&(e.quickhomeorigin=m),m}function R(){return window.innerHeight||a(window).height()}function S(){return window.innerWidth||a(window).width()}function T(){return document.body?a(document).height():document.height}function U(){return document.body?a(document).width():document.width}function V(a){return a.offsetHeight<=0&&a.offsetWidth<=0}function W(a,b,c,d){return{left:a,top:b,right:a+c,bottom:b+d,width:c,height:d}}function X(b){return xb(b)?W(b.pageX,b.pageY,0,0):a.isWindow(b)?W(a(window).scrollLeft(),a(window).scrollTop(),S(),R()):9===b.nodeType?W(0,0,U(),T()):"getBoundingClientRect"in b?ba.apply(b):W(0,0,0,0)}function Y(a,b,c){var d=Math.max(0,Math.max(c.top-a.pageY,a.pageY-c.bottom)),e=Math.max(0,Math.max(c.left-a.pageX,a.pageX-c.right));return e*e+d*d>b}function Z(a,b,c){var d=Math.max(c.bottom-a.pageY,a.pageY-c.top),e=Math.max(c.right-a.pageX,a.pageX-c.left);return e*e+d*d<b}function $(a,b){return b.right<a.left||a.right<b.left||b.bottom<a.top||a.bottom<b.top}function _(a,b){return b.top>=a.top&&b.bottom<=a.bottom&&b.left>=a.left&&b.right<=a.right}function aa(a,b){return 4===a.length&&a[0].pageX===b.left&&a[0].pageY===b.top&&a[1].pageX===b.left&&a[1].pageY===b.bottom&&a[2].pageX===b.right&&a[2].pageY===b.bottom&&a[3].pageX===b.right&&a[3].pageY===b.top}function ba(){var a=this.getBoundingClientRect();return{top:a.top+window.pageYOffset,bottom:a.bottom+window.pageYOffset,left:a.left+window.pageXOffset,right:a.right+window.pageXOffset,width:a.width,height:a.height}}function ca(b,c,d,e,f){var j,k,l,m,g=J(b.parentElement),h=w(g),i=Q(b,h);if(h){if(a.isNumeric(d)&&(l=G(b),j=A(s(g,l),i),k={pageX:j[0],pageY:j[1]},c=L(k,c,d)),m=s(h,B([c.pageX,c.pageY],i)),e||f){var n=Ba(b,!0),o=n?n.sy:1;m[0]+=e*o,m[1]-=f*o}return Ca(m[0])+" "+Ca(m[1])}}function da(a){var b=a.offsetParent;return b?b:document}function ea(b,c){c||(c=a(da(b)).pagexy());var d=J(b.parentElement),e=w(d),f=Q(b,e),g=Ba(b,!0),h=e&&s(e,B([c.pageX,c.pageY],f)),i=g&&1/g.sy;if(e)return[(g.tx-h[0])*i,(h[1]-g.ty)*i]}function fa(b,c){var h,i,d=J(b.parentElement),e=Ba(b,!0),f=a(da(b)).pagexy(),g=[];for(i=0;i<c.length;i++)h=s(d,[c[i][0]*e.sy,-c[i][1]*e.sy]),g.push({pageX:f.pageX+h[0],pageY:f.pageY+h[1]});return g}function ga(b){if(a.isWindow(b))return N(a(window).scrollLeft(),a(window).scrollTop(),S(),R());if(9===b.nodeType||b==document.body)return N(0,0,U(),T());var c=Ya(b);if(c&&c.quickpagexy&&c.down&&c.style)return c.quickpagexy;var d=G(b),e=J(b.parentElement),f=v(e),g=f?null:w(e),h=Q(b,g),i=A(s(e,d),h),j={pageX:i[0],pageY:i[1]};return c&&f&&c.down&&c.style&&(c.quickpagexy=j),j}function ha(a,b){if(!a)return null;for(var c=[],d=0;d<a.length;++d)c.push([a[d].pageX+b[0],a[d].pageY+b[1]]);return c}function ia(b,c){if(a.isWindow(b))return O(a(window).scrollLeft(),a(window).scrollTop(),S(),R());if(9===b.nodeType)return O(0,0,U(),T());var d=H(b)||[1,0,0,1],e=J(b.parentElement),f=t(e,d),g=w(e),h={},i=Q(b,g,h),j=h.gbcr,k=ha(Ya(b).hull,i)||[[j.left,j.top],[j.left,j.bottom],[j.right,j.bottom],[j.right,j.top]];return c?a.map(k,function(a){return{pageX:a[0]-i[0],pageY:a[1]-i[1]}}):a.map(k,function(a){var b=D(f,a,i);return{pageX:b[0],pageY:b[1]}})}function ja(a){var b=Ba(a,!0),c=Fa(Ga(b.rot)),d=Math.sin(c),e=Math.cos(c),f=J(a.parentElement),g=s(f,[d,e]),h=Math.atan2(g[0],g[1]);return Ea(h)}function ka(b,c){var d=b.pageX,e=b.pageY,f=S()/2,g=R()/2,h=a("body"),i=h.width(),j=h.height(),k=a(window);d>i-f&&(d=i-f),d<f&&(d=f),e>j-g&&(e=j-g),e<g&&(e=g),targ={pageX:d,pageY:e},a.isNumeric(c)&&(targ=L(k.origin(),targ,c)),k.scrollLeft(targ.pageX-f),k.scrollTop(targ.pageY-g)}function la(a,b,c){var d=b.pageX-a.pageX,e=b.pageY-a.pageY,f=c.pageX-a.pageX,g=c.pageY-a.pageY;return f*e-d*g}function ma(a,b,c){var d=c.pageX-a.pageX,e=c.pageY-a.pageY;return d*b.pageY-b.pageX*e}function na(a,b){if(b.length<=0)return!1;if(1==b.length)return b[0].pageX==a.pageX&&b[0].pageY==a.pageY;var c=la(a,b[b.length-1],b[0]);if(0===c)return!0;var d=c>0;if(2==b.length)return!1;for(var e=1;e<b.length;++e){var f=la(a,b[e-1],b[e]);if(0===f)return!0;if(f>0!=d)return!1}return!0}function oa(a,b){return{pageX:a.pageX-b.pageX,pageY:a.pageY-b.pageY}}function pa(a,b,c,d){var f,g,e=oa(c,b);for(f=0;f<d.length;++f)if(g=qa(ma(b,e,d[f])),!g||g===a)return!1;return!0}function qa(a){return a>0?1:a<0?-1:0}function ra(a){if(a.length<=2)return 0;var b=la(a[a.length-1],a[0],a[1]);if(0!==b)return qa(b);for(var c=1;c<a.length;++c)if(b=la(a[c-1],a[c],a[(c+1)%a.length]),0!==b)return qa(b);return 0}function sa(a,b){var d,c=ra(a);for(d=0;d<a.length;++d)if(pa(c,a[d],a[(d+1)%a.length],b))return!1;for(c=ra(b),d=0;d<b.length;++d)if(pa(c,b[d],b[(d+1)%b.length],a))return!1;return!0}function ta(a,b){for(var c=0;c<b.length;++c)if(!na(b[c],a))return!1;return!0}function ua(a){function b(a,b){if(!b||!xb(b))return a;for(;a.length>1&&1!=qa(la(a[a.length-2],a[a.length-1],b));)a.pop();return a.length&&d(a[a.length-1],b)||a.push(b),a}function c(a,b,c){for(var d=0;d<a.length;++d)b=c(b,a[d]);return b}function d(a,b){return a.pageX===b.pageX&&a.pageY===b.pageY}function e(a,b){return a.pageX<b.pageX?-1:a.pageX>b.pageX?1:a.pageY<b.pageY?-1:a.pageY>b.pageY?1:0}a.sort(e);var f=c(a,[],b),g=c(a.reverse(),[],b);return f.concat(g.slice(1,-1))}function va(b){if(!b)return null;if(a.isArray(b))return b;for(var c=a.map(b.trim().split(/\s+/),parseFloat),d=[],e=0;e+1<c.length;)d.push({pageX:c[e],pageY:c[e+1]}),e+=2;return d}function xa(b){for(var c=0,d=[];c<b.length;++c)d.push(b[c].pageX,b[c].pageY);return d.length?a.map(d,Ca).join(" "):"none"}function ya(){return{get:function(a,b,c){var d=Ya(a).hull;return xa(d||ia(a,!0))},set:function(a,b){var c=b&&"auto"!=b?"none"==b?[]:ua(va(b)):null;Ya(a).hull=c}}}function za(a){if("none"===a)return{tx:0,ty:0,rot:0,sx:1,sy:1,twi:0};var b=/^(?:translate\(([\-+.\de]+)(?:px)?,\s*([\-+.\de]+)(?:px)?\)\s*)?(?:rotate\(([\-+.\de]+)(?:deg)?\)\s*)?(?:scale\(([\-+.\de]+)(?:,\s*([\-+.\de]+))?\)\s*)?(?:rotate\(([\-+.\de]+)(?:deg)?\)\s*)?$/.exec(a);if(!b)return null;var c=b[1]?parseFloat(b[1]):0,d=b[2]?parseFloat(b[2]):0,e=b[3]?parseFloat(b[3]):0,f=b[4]?parseFloat(b[4]):1,g=b[5]?parseFloat(b[5]):f,h=b[6]?parseFloat(b[6]):0;return{tx:c,ty:d,rot:e,sx:f,sy:g,twi:h}}function Aa(a){var c,b=H(a);return b?(c=E(b),{tx:b[4],ty:b[5],rot:Ea(c[0]),sx:c[1],sy:c[2],twi:Ea(c[3])}):{tx:0,ty:0,rot:0,sx:1,sy:1,twi:0}}function Ba(a,b){return za(a.style[n])||b&&Aa(a)}function Ca(a){var b=a.toString();return~b.indexOf("e")&&(b=Number(a).toFixed(17)),b}function Da(a){var b=[];return(u(a.tx)||u(a.ty))&&b.push("translate("+Ca(a.tx)+"px, "+Ca(a.ty)+"px)"),(u(a.rot)||u(a.twi))&&b.push("rotate("+Ca(a.rot)+"deg)"),(u(1-a.sx)||u(1-a.sy))&&(u(a.sx-a.sy)?b.push("scale("+Ca(a.sx)+", "+Ca(a.sy)+")"):b.push("scale("+Ca(a.sx)+")")),u(a.twi)&&b.push("rotate("+Ca(a.twi)+"deg)"),b.length?b.join(" "):"none"}function Ea(a){var b=180*a/Math.PI;return b>180&&(b-=360),b}function Fa(a){return a*Math.PI/180}function Ga(a){return Math.abs(a)>180&&(a%=360,a>180?a-=360:a<=-180&&(a+=360)),a}function Ha(a){return Math.abs(a)>=720&&(a=a%360+(a>0?360:-360)),a}function Ja(){return Ia.field||La(),Ia.field}function Ka(){return Ia.surface||La(),Ia.surface}function La(){var b=document.createElement("samp"),c=document.createElement("samp"),d=Math.floor(S()/2),e=Math.floor(R()/2);a(b).css({position:"absolute",display:"inline-block",top:0,left:0,width:"100%",height:"100%",font:"inherit",zIndex:-1,transformOrigin:d+"px "+e+"px",pointerEvents:"none",overflow:"hidden"}).addClass("turtlefield"),a(c).attr("id","field").css({position:"absolute",display:"inline-block",top:e,left:d,width:"100%",height:"0",font:"inherit",transformOrigin:"0px 0px",pointerEvents:"all"}).appendTo(b),Ia.surface=b,Ia.field=c,Ma(),mc()}function Ma(){document.body?(null==a("html").attr("style")&&a("html").css("min-height","100%"),a(Ia.surface).prependTo("body"),lc()):a(document).ready(Ma)}function Na(a){return a.drawOnCanvas||(a.drawOnCanvas=Pa()),a.drawOnCanvas}function Oa(b){var c=a.data(b,"turtleData");return c?c.drawOnCanvas?c.drawOnCanvas:Ia.canvas:null}function Pa(){if(Ia.canvas)return Ia.canvas;var b=Ka();return Ia.canvas=document.createElement("canvas"),a(Ia.canvas).css({"z-index":-1}),b.insertBefore(Ia.canvas,b.firstChild),Ta(),Ra(Ta),a(window).resize(Ta),Ia.canvas}function Qa(a,b){return Ia.offscreen&&Ia.offscreen.width===a&&Ia.offscreen.height===b?(Ia.offscreen.getContext("2d").clearRect(0,0,a,b),Ia.offscreen):(Ia.offscreen||(Ia.offscreen=document.createElement("canvas")),Ia.offscreen.width=a,Ia.offscreen.height=b,Ia.offscreen)}function Ra(b){var c=a("body"),d=c.width(),e=c.height(),f=function(){c.width()==d&&c.height()==e||(b(),d=c.width(),e=c.height())};Ia.timer&&clearInterval(Ia.timer),Ia.timer=setInterval(f,250)}function Sa(){var b=a("body");return[Math.max(b.outerWidth(!0),window.innerWidth||a(window).width()),Math.max(b.outerHeight(!0),window.innerHeight||a(window).height())]}function Ta(){if(Ia.canvas){var i,b=Sa(),c=b[0],d=b[1],e=Ia.canvas.width,f=Ia.canvas.height,g=Math.max(Math.min(2e3,Math.max(200,e)),100*Math.ceil(c/100))*Ia.subpixel,h=Math.max(Math.min(2e3,Math.max(200,e)),100*Math.ceil(d/100))*Ia.subpixel;a(Ia.surface).css({width:c+"px",height:d+"px"}),e==g&&f==h||(i=document.createElement("canvas"),i.width=Math.min(e,g),i.height=Math.min(f,h),i.getContext("2d").drawImage(Ia.canvas,0,0),Ia.canvas.width=g,Ia.canvas.height=h,Ia.canvas.getContext("2d").drawImage(i,0,0),a(Ia.canvas).css({width:g/Ia.subpixel,height:h/Ia.subpixel}))}}function Ua(a,b){if(!a)return null;if(a&&"function"==typeof a&&(a.helpname||a.name)&&(a=a.helpname||a.name),a=String(a),a.trim&&(a=a.trim()),!a||"none"===a)return null;if("path"===a||"fill"===a)return{savePath:!0};var c=!1;/^erase\b/.test(a)&&(a=a.replace(/^erase\b/,"white; globalCompositeOperation:destination-out"),c=!0);var d=p(a,b);return c&&(d.eraseMode=!0),d}function Va(a){return a?q(a):"none"}function Wa(a){return"down"==a||a===!0||"up"!=a&&a!==!1&&b}function Xa(a){return a?"down":"up"}function Ya(b){var c=a.data(b,"turtleData");return c||(c=a.data(b,"turtleData",{style:null,corners:[[]],path:[[]],down:!1,speed:"turtle",easing:"swing",turningRadius:0,drawOnCanvas:null,quickpagexy:null,quickhomeorigin:null,instrument:null,stream:null})),c}function Za(b){var c=a.data(b,"turtleData");return c?c.turningRadius:0}function $a(){return{get:function(a,b,c){return Ca(Za(a))+"px"},set:function(a,b){var c=parseFloat(b);if(!isNaN(c)&&(Ya(a).turningRadius=c,a.style.turtleTurningRadius=""+Ca(c)+"px",0===c)){var d=Ba(a,!1);d&&(d.rot>180||d.rot<=-180)&&(d.rot=Ga(d.rot),a.style[n]=Da(d))}}}}function _a(){return{get:function(a,b,c){return Va(Ya(a).style)},set:function(a,b){var c=Ua(b,"strokeStyle"),d=Ya(a);d.style&&(d.style=null,mb(a,d,!0)),d.style=c,a.style.turtlePenStyle=Va(c),mb(a,d,!0)}}}function ab(){return{get:function(a,b,c){return Xa(Ya(a).down)},set:function(a,c){var d=Wa(c);if(d!==b){var e=Ya(a);d!=e.down&&(e.down=d,e.quickpagexy=null,e.quickhomeorigin=null,a.style.turtlePenDown=Xa(d),mb(a,e,!0))}}}}function bb(a,b){return 0===Math.round(a.pageX-b.pageX)&&0===Math.round(a.pageY-b.pageY)}function cb(a,b){return 0===Math.round(1e3*(a.pageX-b.pageX))&&0===Math.round(1e3*(a.pageY-b.pageY))}function db(a,b){return bb(a,b)&&0===Math.round(a.pageX-b.pageX1)&&0===Math.round(a.pageY-b.pageY1)&&0===Math.round(b.pageX2-b.pageX)&&0===Math.round(b.pageY2-b.pageY)}function eb(a){var b=1e3*a,c=Math.round(b);return Math.abs(c-b)<Math.abs(5e-15*b)?c/1e3:a}function fb(a,b,c){c=c||1;var d=b.eraseMode?1:0;if(b&&"strokeStyle"in b||(a.strokeStyle="black"),b&&"lineWidth"in b||(a.lineWidth=1.62*c+d),b&&"lineCap"in b||(a.lineCap="round"),b&&"lineJoin"in b||(a.lineJoin="round"),b)for(var e in b)"savePath"!==e&&"eraseMode"!==e&&(c&&"lineWidth"===e?a[e]=c*b[e]+d:"lineDash"===e?a.setLineDash((""+b[e]).split(/[,\s]/g)):a[e]=b[e])}function gb(a){if(a){if(a===Ia.canvas)return[Ia.subpixel,0,0,Ia.subpixel];var k,b=J(a.parentElement),c=w(b),d={},e=Q(a,c,d),f=d.gbcr,g=[1,0,0,1,-e[0],-e[1]],h=f.width&&f.height&&[a.width/f.width,0,0,a.height/f.height],i=H(a)||[1,0,0,1],j=x(i);if(c&&j&&h)return k=t(t(t(h,j),c),g),k[4]+=d.localorigin[0]*h[0],k[5]+=d.localorigin[1]*h[3],k}}function hb(a,b){if(b===Ia.canvas)a.setTransform(Ia.subpixel,0,0,Ia.subpixel,0,0);else{var c=gb(b);c&&a.setTransform.apply(a,c)}}function jb(a,b,c,d,e){var g,h,j,f=a.getContext("2d"),i=b.length;for(f.save(),hb(f,a),f.beginPath(),fb(f,c,d);i--;)if(b[i].length>1){j=b[i],g=j.length>2&&bb(j[0],j[j.length-1])&&!bb(j[0],j[Math.floor(j.length/2)]),h=g&&!("pageX2"in j[j.length-1]);var k=j[0].pageX,l=j[0].pageY;f.moveTo(k,l);for(var m=1;m<j.length-(h?1:0);++m)"pageX2"in j[m]&&!db(j[m-1],j[m])?f.bezierCurveTo(j[m].pageX1,j[m].pageY1,j[m].pageX2,j[m].pageY2,j[m].pageX,j[m].pageY):f.lineTo(j[m].pageX,j[m].pageY);g&&f.closePath()}"fillStyle"in c&&f.fill(),"strokeStyle"in c&&f.stroke(),f.restore(),b.length=1,b[0].splice(0,Math.max(0,b[0].length-e))}function kb(a,b,c){a.length&&bb(b,a[a.length-1])||a.push(b);for(var d=0;d<c.length;++d)a.push({pageX1:c[d][0].pageX,pageY1:c[d][0].pageY,pageX2:c[d][1].pageX,pageY2:c[d][1].pageY,pageX:c[d][2].pageX,pageY:c[d][2].pageY})}function lb(a,b){a.length&&(b.corner?cb(b,a[a.length-1]):bb(b,a[a.length-1]))||a.push(b)}function mb(a,b,c){if(b){var d=b.path,e=b.style,f=b.corners;if(!e||!b.down)return d.length>1&&(d.length=1),d[0].length&&(d[0].length=0),void(c&&(e?f.length&&f[0].length&&(1==f[0].length?f[0].length=0:f.unshift([])):(window.buggy&&console.trace("clearing the retracing path"),f.length>1&&(f.length=1),f[0].length&&(f[0].length=0))));if(c||!e.savePath){var g=ga(a);if(c&&(g.corner=!0,lb(f[0],g)),!e.savePath){lb(d[0],g);var h=Ba(a,!0);jb(Na(b),b.path,e,h.sx,2)}}}}function nb(b,c){var d=Ba(b,!0),e=Ya(b);e.style&&(c=a.extend({},e.style,c)),jb(Na(e),e.corners,c,d.sx,1)}function ob(b){if((!b||/\bcanvas\b/.test(b))&&Ia.canvas){var c=Ia.canvas.getContext("2d");c.save(),c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,Ia.canvas.width,Ia.canvas.height),c.restore()}if((!b||/\bturtles\b/.test(b))&&Ia.surface){var d=a(Ia.surface).find(".turtle").not(".turtlefield");qd&&(d=d.not(qd)),d.remove()}if((!b||/\blabels\b/.test(b))&&Ia.surface){var d=a(Ia.surface).find(".turtlelabel").not(".turtlefield");d.remove()}b&&!/\btext\b/.test(b)||a("body").contents().not(".turtlefield").remove()}function pb(a,b){if(!a||a.length<1)return null;for(var c=1,d={left:Math.floor(a[0].pageX),top:Math.floor(a[0].pageY),right:Math.ceil(a[0].pageX),bottom:Math.ceil(a[0].pageY)};c<a.length;++c)d.left=Math.min(d.left,Math.floor(a[c].pageX)),d.top=Math.min(d.top,Math.floor(a[c].pageY)),d.right=Math.max(d.right,Math.ceil(a[c].pageX)),d.bottom=Math.max(d.bottom,Math.ceil(a[c].pageY));return b&&(d.left=Math.max(b.left,d.left),d.top=Math.max(b.top,d.top),d.right=Math.min(b.right,d.right),d.bottom=Math.min(b.bottom,d.bottom)),d}function qb(a,b){if(!a||!b)return null;if(4==a.length&&v(a))return b;var d,e,c=[];for(d=0;d<b.length;++d)e=s(a,[b[d].pageX,b[d].pageY]),c.push({pageX:e[0],pageY:e[1]});return c}function rb(a,b){if(!a)return!1;var c=Hd(b),d=Oa(a);if(!d)return c&&0==c[3];var o,e=gb(d),f=ia(a),g=qb(e,f),h=pb(g,{left:0,top:0,right:d.width,bottom:d.height}),i=h.right-h.left,j=h.bottom-h.top,k=Qa(i,j),l=k.getContext("2d"),c=Hd(b),m=1;if(!g||g.length<3||!i||!j)return!1;for(l.drawImage(d,h.left,h.top,i,j,0,0,i,j),l.save(),l.beginPath(),l.moveTo(0,0),l.lineTo(i,0),l.lineTo(i,j),l.lineTo(0,j),l.closePath(),l.moveTo(g[0].pageX-h.left,g[0].pageY-h.top);m<g.length;m+=1)l.lineTo(g[m].pageX-h.left,g[m].pageY-h.top);if(l.closePath(),l.clip(),c&&0==c[3]?l.fillRect(0,0,i,j):l.clearRect(0,0,i,j),l.restore(),o=l.getImageData(0,0,i,j).data,c&&0!=c[3]){for(m=0;m<o.length;m+=4)if(Math.abs(o[m+0]-c[0])<=3&&Math.abs(o[m+1]-c[1])<=3&&Math.abs(o[m+2]-c[2])<=3&&o[m+3]<=2*c[3]&&o[m+3]>=c[3]/2)return!0}else{var p=!c;for(m=0;m<o.length;m+=4)if(o[m+3]>0==p)return!0}return!1}function sb(a,b,c){if(b.img)"CANVAS"!=a[0].tagName&&a[0].tagName!=b.img.tagName||Yb(b.img,a[0],b.css);else if("IMG"==a[0].tagName||"CANVAS"==a[0].tagName)Vb(a[0],b.url,b.css,c),c=null;else{var d={backgroundImage:"url("+b.url+")",backgroundRepeat:"no-repeat",backgroundPosition:"center"};b.css.width&&b.css.height&&(d.backgroundSize=b.css.width+"px "+b.css.height+"px"),a.css(d)}c&&c()}function tb(b,c,d){var l,e=Ba(b,!0),f=e&&Fa(e.rot),g=e&&c*e.sy,h=e&&(d||0)*e.sy,i=-Math.cos(f)*g,j=Math.sin(f)*g,k=a.data(b,"turtleData");e&&(d&&(i+=Math.sin(f)*h,j+=Math.cos(f)*h),k&&(l=k.quickpagexy)&&(k.quickpagexy={pageX:l.pageX+j,pageY:l.pageY+i}),e.tx+=j,e.ty+=i,b.style[n]=Da(e),mb(b,k,!0))}function ub(b,c,d){var g,e=Ba(b,!0),f=a.data(b,"turtleData");e&&(f&&(g=f.quickpagexy)&&(f.quickpagexy={pageX:g.pageX+c,pageY:g.pageY-d}),e.tx+=c,e.ty-=d,b.style[n]=Da(e),mb(b,f,!0))}function vb(a,b){var c=Ba(a,!0);c&&(c.rot+=b,a.style[n]=Da(c))}function wb(a,b,c){var d=Ba(a,!0),e=d&&Fa(d.rot),f=d&&b*d.sy,g=d&&(c||0)*d.sy,h=-Math.cos(e)*f,i=Math.sin(e)*f;if(d)return g&&(h+=Math.sin(e)*g,i+=Math.cos(e)*g),Ca(d.tx+i)+" "+Ca(d.ty+h)}function xb(b){return b&&a.isNumeric(b.pageX)&&a.isNumeric(b.pageY)}function yb(){return{get:function(a,b,c){return Ya(a).speed},set:function(b,c){(a.isNumeric(c)&&!(c<=0)||c in a.fx.speeds||""+c=="Infinity")&&(Ya(b).speed=""+c)}}}function zb(){return{get:function(a,b,c){return Ya(a).easing},set:function(b,c){c in a.easing&&(Ya(b).easing=c)}}}function Ab(b,c){var d=a.data(b,"turtleData");return c=c||ae,d?a.isNumeric(d.speed)||"Infinity"==d.speed?1e3/d.speed:"turtle"==d.speed&&c?0:d.speed:c?0:"turtle"}function Bb(b){var c=a.data(b,"turtleData");return c?c.easing:null}function Cb(){return{get:function(a,b,c){var d=Ba(a,b),e=I(a);if(d){var f=Fa(d.rot),g=Math.cos(f),h=Math.sin(f);return Ca(((d.tx+e[0])*h-(d.ty+e[1])*g)/d.sy)+"px"}},set:function(b,c){var o,d=Ba(b,!0)||{tx:0,ty:0,rot:0,sx:1,sy:1,twi:0},e=I(b),f=parseFloat(c)*d.sy,g=Fa(d.rot),h=Math.cos(g),i=Math.sin(g),j=(d.tx+e[0])*h+(d.ty+e[1])*i,k=j*h+f*i-e[0],l=j*i-f*h-e[1],m=a.data(b,"turtleData");m&&(o=m.quickpagexy)&&(m.quickpagexy={pageX:o.pageX+(k-d.tx),pageY:o.pageY+(l-d.ty)}),d.tx=k,d.ty=l,b.style[n]=Da(d),mb(b,m)}}}function Db(b,c,d,e){return{get:function(a,c,e){var f=Ba(a,c);if(f)return f[b]+d},set:function(d,f){var l,g=Ba(d,!0)||{tx:0,ty:0,rot:0,sx:1,sy:1,twi:0},h={displace:e},i=a.data(d,"turtleData"),j=g.tx,k=g.ty;g[b]=c(f,d,g,h),d.style[n]=Da(g),h.displace&&(i&&(l=i.quickpagexy)&&(i.quickpagexy={pageX:l.pageX+(g.tx-j),pageY:l.pageY+(g.ty-k)}),mb(d,i))}}}function Eb(a,b,c){var d=Ha(b-a),e=d>0?c:-c,f=Fa(a),g=[Math.cos(f)*e,Math.sin(f)*e],h=Fa(b);return{delta:d,sradius:e,dc:g,dx:g[0]-Math.cos(h)*e,dy:g[1]-Math.sin(h)*e}}function Fb(a,b,c,d,e,f){var j,k,l,m,n,p,q,r,t,u,v,g=Eb(c,d,e),h=g.sradius,i=g.dc;for(q=1,r=g.delta,t=Math.abs(g.delta),t>45&&(q=Math.ceil(t/45),r=g.delta/q),u=[];--q>=0;)j=0===q?d:c+r,k=Fa(c+180),l=Fa(j+180),u.push.apply(u,F(k,l)),c=j;for(v=[],m=0;m<u.length;m++)n=s(f,A(C(u[m],h),i)),v.push({pageX:n[0]+b.pageX,pageY:n[1]+b.pageY});for(p=[],m=0;m<v.length;m+=3)p.push(v.slice(m,m+3));return kb(a,b,p),g}function Gb(b,c,d,e){b=parseFloat(b);var f=a.data(c,"turtleData"),g=f?f.turningRadius:0;if(0===g||d.rot==b)return e.displace=!1,0===g?Ga(b):b;var j,h=f&&f.style&&f.down,i=g*d.sy;return j=h?Fb(f.path[0],ga(c),d.rot,b,i,J(c.parentElement)):Eb(d.rot,b,i),d.tx+=j.dx,d.ty+=j.dy,e.displace=!0,b}function Hb(b){return function(c){c.delta||(c.delta=Ha(c.end-c.start),c.start=c.end-c.delta),a.cssHooks[b].set(c.elem,c.start+c.delta*c.pos)}}function Ib(b,c){b.length&&"_"===b[0]&&(b=b.substring(1));for(var d=a.map((""+b).split(/\s+/),parseFloat);d.length<2;)d.push(c?d.length?d[d.length-1]:1:0);return d}function Jb(b,c){return function(d){if(!d.delta){var e=Ib(d.end,!c);d.start=Ib(d.start,!c),d.delta=[e[0]-d.start[0],e[1]-d.start[1]]}a.cssHooks[b].set(d.elem,[d.start[0]+d.delta[0]*d.pos,d.start[1]+d.delta[1]*d.pos].join(" "))}}function Lb(b,c,d,e){return{get:function(a,b,f){var g=Ba(a,b);if(g)return e||g[c]!=g[d]?(""===f?"_":"")+g[c]+" "+g[d]:""+g[c]},set:function(b,f,g){var m,h=Ba(b,!0)||{tx:0,ty:0,rot:0,sx:1,sy:1,twi:0},i="string"==typeof f?f.split(/\s+/):[f],j=a.data(b,"turtleData"),k=h.tx,l=h.ty;i.length<1||i.length>2||(i.length>=1&&(h[c]=parseFloat(i[0])),i.length>=2?h[d]=parseFloat(i[1]):e?h[d]=0:h[d]=h[c],b.style[n]=Da(h),e&&(j&&(m=j.quickpagexy)&&(j.quickpagexy={pageX:m.pageX+(h.tx-k),pageY:m.pageY+(h.ty-l)}),mb(b,j)))}}}function Nb(a){return Mb.href=a,Mb}function Ob(a){return Nb(a).href}function Pb(a){return/(?:^|\.)pencil(?:code)?\./i.test(a)}function Qb(a){var b=Nb(null==a?"":a).hostname,c=/^(\w+)\.pencil(?:code)?\./i.exec(b);return c?c[1]:null}function Rb(a,b){var c=Nb(null==a?"":a),d=c.href;return Pb(c.hostname)?/^\/(?:edit|home|code|load|save)(?:\/|$)/.test(c.pathname)&&(d=c.protocol+"//"+c.host+"/"+b+"/"+c.pathname.replace(/\/[^\/]*(?:\/|$)/,"")+c.search+c.hash):Pb(window.location.hostname)&&(d="/proxy/"+d),d}function Sb(a){return/\//.test(a)?a:(a="/img/"+a,Pb(window.location.hostname)?a:"//pencil.io"+a)}function Tb(){if(!document.cookie)return null;for(var a=document.cookie.split(/;\s*/),b=0;b<a.length;++b)if(/^login=/.test(a[b])){var c=unescape(a[b].substr(6)).split(":");if(c&&2==c.length)return{user:c[0],key:c[1]}}return null}function Vb(a,b,c,d){function g(a,b,c,d){b.getAttribute("data-loading")==a.src&&(b.removeAttribute("data-loading"),Yb(a,b,c)),d&&d()}var e,f=Nb(b),b=f.href;a.setAttribute("data-loading",b),b in Ub?(e=Ub[b],null===e.queue?g(e.img,a,c,d):(e.queue.push({elem:a,css:c,cb:d}),Xb(b,a,c))):(Ub[b]=e={img:new Image,queue:[{elem:a,css:c,cb:d}]},Pb(f.hostname)&&(e.img.crossOrigin="Anonymous"),Xb(b,a,c),Wb(e.img,b,function(){var a,b=e.queue;if(e.queue=null,b)for(a=0;a<b.length;++a)g(e.img,b[a].elem,b[a].css,b[a].cb)}))}function Wb(a,b,c){function e(f){f||a.complete||a.src!=b?(a.removeEventListener("load",e),a.removeEventListener("error",e),clearTimeout(d),c()):d=setTimeout(e,100)}if(null==b&&(b=a.src),b==a.src&&(!b||a.complete))return void c();var d=null;a.addEventListener("load",e),a.addEventListener("error",e),a.src=b,e()}function Xb(a,b,c){/^data:/.test(a)&&c.width&&c.height&&Yb(null,b,c)}function Yb(b,c,d){var h,e=I(c),f=a(c),g="CANVAS"==c.tagName;if(g||(c.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),f.css({backgroundImage:"none",height:"",width:"",turtleHull:"",transformOrigin:""}),b)if("VIDEO"==b.tagName)c.width=a(b).width(),c.height=a(b).height(),g&&(h=c.getContext("2d"),h.clearRect(0,0,c.width,c.height),h.drawImage(b,0,0,b.videoWidth,b.videoHeight,0,0,c.width,c.height));else if(c.width=b.width,c.height=b.height,g){if(b.width>0&&b.height>0)try{h=c.getContext("2d"),h.clearRect(0,0,b.width,b.height),h.drawImage(b,0,0)}catch(a){}}else c.src=b.src;d&&f.css(d);var i=I(c);if(b&&!d.turtleHull)try{var j=Of(b);Rf(j,parseFloat(f.css("width"))/b.width,parseFloat(f.css("height"))/b.height,-i[0],-i[1]),f.css("turtleHull",j)}catch(a){}Zb(c,e,i)}function Zb(b,c,d){var e=a(b);if(e.hasClass("turtle")&&(d[0]!=c[0]||d[1]!=c[1]))if("absolute"==e.css("position")&&/px$/.test(e.css("left"))&&/px$/.test(e.css("top")))e.css("left",parseFloat(e.css("left"))+c[0]-d[0]),e.css("top",parseFloat(e.css("top"))+c[1]-d[1]);else{var f=Ba(b,!0);f.tx+=c[0]-d[0],f.ty+=c[1]-d[1],b.style[n]=Da(f)}}function $b(c,d,e,f,g){var h,i,j,k,l;return f===b&&g===b?(h=a(e),h.length?(i=h[0],j=X(i),aa(ia(i),j)?c.filter(function(){var b=X(this);return d===(_(j,b)||!$(j,b)&&a(this).inside(i))}):c.filter(function(){return d===a(this).inside(i)})):[]):(k=a.isNumeric(f)&&a.isNumeric(g)?[f,g]:f,a.isArray(k)&&(k=fa(c[0]||document.body,[k])[0]),"touch"===e?xb(k)?c.filter(function(){return d===a(this).touches(k)}):(h=a(k),j=X(h[0]),aa(ia(h[0]),j)?c.filter(function(){var a=X(this);return d===(!$(j,a)&&(_(j,a)||h.touches(this)))}):c.filter(function(){return d===h.touches(this)})):(l=e*e,c.filter(function(){var a=X(this);if(Y(k,l,a))return!d;if(Z(k,l,a))return d;var b=ga(this),c=k.pageX-b.pageX,e=k.pageY-b.pageY;return d===c*c+e*e<=l})))}function fc(){if(!ec){ec=!0;try{window.parent.document.activeElement.blur()}catch(a){}window.focus()}}function ic(b,c,d,e,f){for(var g=e.split(/\s+/),h=0;h<g.length;++h){e=g[h];var i=b[e];i||(i=b[e]=a.extend({},d)),"function"!=typeof i[c]?i[c]=f:i[c]!=f&&(i[c].hooklist?i[c].hooklist.indexOf(f)<0&&i[c].hooklist.push(f):!function(){var a=[i[c],f];(i[c]=function(b,c){for(var d=b,e=0;e<a.length;++e)d=a[e](d,c)||d;return d}).hooklist=a}())}}function jc(b,c){if(Ia.field&&"pageX"in b&&"pageY"in b){var d=a(Ia.field).offset();d&&(b.x=b.pageX-d.left,b.y=d.top-b.pageY)}return b}function kc(a,b,c){return(Ia.field&&!Ia.fieldMouse&&this.parentElement===Ia.field||/(?:^|\s)turtle(?:\s|$)/.test(this.class))&&(Ia.fieldMouse=!0,lc()),!1}function lc(){Ia.fieldHook||Ia.surface&&Ia.fieldMouse&&(Ia.fieldHook=!0,setTimeout(function(){a("body").on("click.turtle dblclick.turtle mouseup.turtle mousedown.turtle mousemove.turtle",function(b){if(b.target===this&&!b.isTrigger){var c=a.turtle.nowarn;a.turtle.nowarn=!0;var d=a(Ia.surface).find(".turtle").within("touch",b).eq(0);if(a.turtle.nowarn=c,1===d.length)return b.target=null,b.relatedTarget=null,b.fromElement=null,b.toElement=null,d.trigger(b),!1}})},0))}function mc(){var b="mousedown mouseup mousemove click dblclick";ic(a.event.fixHooks,"filter",a.event.mouseHooks,b,jc),ic(a.event.special,"setup",{},b,kc)}function nc(a,b){var c=a.which;c||(c=(b||a.originalEvent).whichSynth);var d=gc[c];return!d&&c&&(d=String.fromCharCode(c)),a.key=d,a}function oc(a,b){null!=a.charCode&&(a.key=String.fromCharCode(a.charCode))}function pc(a){if("string"==typeof a.data){var b=a.data.replace(/\s/g,"").toLowerCase().split(","),c=a.handler,d=function(a){
    if(!(b.indexOf(a.key)<0))return c.apply(this,arguments)};c.guid&&(d.guid=c.guid),a.handler=d}}function qc(){ic(a.event.fixHooks,"filter",a.event.keyHooks,"keydown keyup",nc),ic(a.event.fixHooks,"filter",a.event.keyHooks,"keypress",oc),ic(a.event.special,"add",{},"keydown keyup keypress",pc)}function rc(){return{get:function(a,b,c){return q(tc(a).getTimbre())},set:function(a,b){tc(a).setTimbre(p(b,"wave"))}}}function sc(){return{get:function(a,b,c){return tc(a).getVolume()},set:function(a,b){tc(a).setVolume(parseFloat(b))}}}function tc(b){var c=Ya(b);if(c.instrument)return c.instrument;c.instrument=new Ac("piano");var d=a(b);return c.instrument.on("noteon",function(b){var c=a.Event("noteon");c.midi=b.midi,d.trigger(c)}),c.instrument.on("noteoff",function(b){var c=a.Event("noteoff");c.midi=b.midi,d.trigger(c)}),c.instrument}function vc(){return uc||(uc=new Ac),uc}function wc(){return!(!window.AudioContext&&!window.webkitAudioContext)}function xc(){if(xc.audioTop)return xc.audioTop;if(!wc())return null;var a=new(window.AudioContext||window.webkitAudioContext);return xc.audioTop={ac:a,wavetable:Bc(a),out:null,currentStart:null},yc(),xc.audioTop}function yc(){if(xc.audioTop){var a=xc.audioTop;a.out&&(a.out.disconnect(),a.out=null,a.currentStart=null);var b=a.ac.createDynamicsCompressor();b.ratio=16,b.attack=5e-4,b.connect(a.ac.destination),a.out=b}}function zc(){var a=xc();return null!=a.currentStart?a.currentStart:(a.currentStart=Math.max(.25,a.ac.currentTime),setTimeout(function(){a.currentStart=null},0),a.currentStart)}function Bc(a){return function(b){function c(b){var f,c=b.real.length,d=new Float32Array(c),e=new Float32Array(c);for(f=0;f<c;++f)d[f]=b.real[f],e[f]=b.imag[f];try{return a.createPeriodicWave(d,e)}catch(a){}try{return a.createWaveTable(d,e)}catch(a){}return null}function d(a,b,c){var e,g,d={real:[],imag:[]},f=a.real.length;for(e=0;e<f;++e)g=Math.log(b[Math.min(e,b.length-1)]),d.real.push(a.real[e]*Math.exp(c*g)),d.imag.push(a.imag[e]*Math.exp(c*g));return d}var f,g,i,j,k,l,e={};for(f in b)if(g=b[f],l=c(g)){if(k={wave:l},g.mult)for(j=b[f].freq,k.freq={},i=0;i<j.length;++i)l=c(d(g,g.mult,(i+1)/j.length)),l&&(k.freq[j[i]]=l);g.defs&&(k.defs=g.defs),e[f]=k}return e}({piano:{real:[0,0,-.203569,.5,-.401676,.137128,-.104117,.115965,-.004413,.067884,-.00888,.0793,-.038756,.011882,-.030883,.027608,-.013429,.00393,-.014029,.00972,-.007653,.007866,-.032029,.046127,-.024155,.023095,-.005522,.004511,-.003593,.011248,-.004919,.008505],imag:[0,.147621,0,7e-6,-1e-5,5e-6,-6e-6,9e-6,0,8e-6,-1e-6,14e-6,-8e-6,3e-6,-9e-6,9e-6,-5e-6,2e-6,-7e-6,5e-6,-5e-6,5e-6,-23e-6,37e-6,-21e-6,22e-6,-6e-6,5e-6,-4e-6,14e-6,-7e-6,12e-6],mult:[1,1,.18,.016,.01,.01,.01,.004,.014,.02,.014,.004,.002,1e-5],freq:[65,80,100,135,180,240,620,1360],defs:{wave:"piano",gain:.5,attack:.002,decay:.4,sustain:.005,release:.1,decayfollow:.7,cutoff:800,cutfollow:.1,resonance:1,detune:1.001}}})}function Cc(b){var d,f,c=[],e=b.length;for(e&&a.isFunction(b[e-1])&&(f=b[--e]),d=0;d<e;++d)b[d]&&(b[d].constructor===a?c.push.apply(c,b[d].toArray()):a.isArray(b[d])?c.push.apply(c,b[d]):c.push(b[d]));return{elts:a.unique(c),completion:f}}function Dc(){function g(){var b,a=f;for(f=null,d&&d(),b=0;b<a.length;++b)a[b]()}var e,b=Cc(arguments),c=b.elts,d=b.completion,f=[];if(c.length>1)for(e=0;e<c.length;++e)fd(c[e]),a(c[e]).queue(function(a){f&&(f.push(a),f.length==c.length&&g())})}function Ec(){var e,b=Cc(arguments),c=b.elts,d=b.completion,f=c.length;for(e=0;e<c.length;++e)a(c[e]).queue(function(b){a(this).remove(),f-=1,d&&0==f&&d(),b()})}function Fc(a){Ee.html('<aside style="line-height:133%;word-break:normal;white-space:normal">'+a+"</aside>")}function Gc(c){var e,f,d=a.extend({},td,ed,ud);if(c&&!a.isArray(c.helptext)&&c in d&&(c=d[c]),c&&a.isArray(c.helptext)&&c.helptext.length){for(f=0;f<c.helptext.length;++f){var g=c.helptext[f];Fc(g.replace(/<(u)>/g,'<$1 style="border:1px solid black;text-decoration:none;word-break:keep-all;white-space:nowrap">').replace(/<(mark)>/g,'<$1 style="border:1px solid blue;color:blue;text-decoration:none;word-break:keep-all;white-space:nowrap;cursor:pointer;" onclick="see.enter($(this).text())">'))}return xd}if("number"==typeof c)return Fc("Equal to the number "+c+"."),xd;if("boolean"==typeof c)return Fc("Equal to the boolean value "+c+"."),xd;if(null===c)return Fc("The special null value represents the absence of a value."),xd;if(c===b)return Fc("This is an unassigned value."),xd;if(c===window)return Fc("The global window object represents the browser window."),xd;if(c===document)return Fc("The HTML document running the program."),xd;if(c===jQuery)return Fc('The jQuery function.  Read about it at <a href="http://learn.jquery.com/" target="_blank">jquery.com</a>.'),xd;if(c&&c!=Gc)return Fc("No help available for "+c),xd;e=[];for(var h in d)!d[h].helptext||!d[h].helptext.length||h in window&&"function"!=typeof window[h]||e.push(h);return e.sort(function(a,b){return a.length!=b.length?a.length-b.length:a<b?-1:a>b?1:0}),Fc("help available for: "+e.map(function(a){return'<mark style="border:1px solid blue;color:blue;text-decoration:none;word-break:keep-all;white-space:nowrap;cursor:pointer;" onclick="see.enter($(this).text())">'+a+"</mark>"}).join(" ")),xd}function Hc(a){return 1==a.length&&Ic(a[0])&&a[0]}function Ic(b){var c;return b&&0==a.queue(b).length&&(0===(c=Ab(b))||0===a.fx.speeds[c])}function Jc(b,c){var d;if(null==c){if(Ic(b))return;d=Ab(b)}else d=1e3*c;var e=a(b);d>0&&e.delay(d)}function Lc(a,b){if(b=b||0,a.length<=b)return null;var c=a[a.length-1];return"function"!=typeof c||c.helpname?null:c}function Mc(b,c,d,e){function m(d,e){if(null!=d){var h=b&&b[d];e&&h&&mb(h,a.data(h,"turtleData"),!0),ue.reportEvent("resolve",[c,l,i,d,h])}0==--j&&g&&(k?(f+=1,setTimeout(function(){f-=1,g()},0)):g())}function n(a){null!=a&&ue.reportEvent("appear",[c,l,i,a,b&&b[a],h])}var g=Lc(d,e),h=g?Array.prototype.slice.call(d,0,d.length-1):d,i=b?b.length||0:0,j=i+1,k=!0,l=ue.nextId();return ue.reportEvent("enter",[c,l,i,h]),{name:c,args:h,appear:n,resolve:m,resolver:function(a,b){return function(){m(a,b)}},exit:function(){ue.reportEvent("exit",[c,l,i,h]),m(null),k=!1}}}function Nc(b,c,d,f){var g=function(){if(kd(b),e)throw new Error(b+" interrupted");var i,g=Mc(this,b,arguments,c),h=[g].concat(a.makeArray(g.args));try{i=f.apply(this,h)}finally{g.exit()}return i};return Sc(b,d,g)}function Oc(a,b,c){var d=function(){if(kd(a),e)throw new Error(a+" interrupted");return ld(a,this),c.apply(this,arguments)};return Sc(a,b,d)}function Pc(b,c,d,f){var g=function(){if(kd(b),e)throw new Error(b+" interrupted");var g=null,h=0,i=qd;if(f&&(g=f.apply(null,arguments),h=arguments.length,i=pd()),i){var j=a(qd).eq(0),k=arguments,l=Mc(j,b,arguments,h);j.plan(function(a,b){l.appear(a),d.apply(g,k),this.plan(l.resolver(a))}),l.exit()}else l=Mc(null,b,arguments,h),d.apply(g,arguments),l.exit();if(g)return g.result};return Sc(b,c,g)}function Qc(b,c){return Sc(b,c,function(c,d){var f=/^key/.test(b),g=/^mouse|click$/.test(b),h=g?"input,button":f?"textarea,input:not([type]),input[type=text],input[type=password]":null;f&&fc(),null==d&&"function"==typeof c&&(d=c,c=null),a(window).on(b+".turtleevent",null,c,h?function(b){if(!e&&!a(b.target).closest(h).length)return d.apply(this,arguments)}:d)})}function Rc(){var b=a._data(window,"events");if(!b)return!1;for(var c in b)for(var d=b[c],e=0;e<d.length;++e)if("turtleevent"==d[e].namespace)return!0;return!1}function Sc(a,b,c){return c.helpname=a,c.helptext=b,c}function Tc(a,b,c){b=null==b?90:Ha(b);var d,e="lt"===a.name,f=ae;if((d=Hc(this))&&(0===c||null==c&&0===Za(d)))return a.appear(0),vb(d,e?-b:b),a.resolve(0),this;var g=e?"-=":"+=";return null==c?(this.plan(function(c,d){a.appear(c),this.animate({turtleRotation:g+Ca(b||0)+"deg"},Ab(d,f),Bb(d),a.resolver(c))}),this):(this.plan(function(d,h){a.appear(d);var i=Ya(h),j=i.turningRadius,k=b<0?-c:c,l=null;i.style&&i.down&&(l=function(){var a=ga(h),c=Ba(h,!0),d=J(h.parentElement);return function(){Fb(i.corners[0],a,c.rot,c.rot+(e?-b:b),k*c.sy,d)}}()),i.turningRadius=k,this.animate({turtleRotation:g+Ca(b)+"deg"},Ab(h,f),Bb(h)),this.plan(function(){l&&l(),i.turningRadius=j,a.resolve(d,!0)})}),this)}function Uc(a,b){null==b&&(b=100),"bk"===a.name&&(b=-b);var c,d=ae;return(c=Hc(this))?(a.appear(0),tb(c,b,0),a.resolve(0,!0),this):(this.plan(function(c,e){a.appear(c),this.animate({turtleForward:"+="+Ca(b||0)+"px"},Ab(e,d),Bb(e),a.resolver(c,!0))}),this)}function Vc(b,c,d){a.isArray(c)&&(d=c[1],c=c[0]),d||(d=0),c||(c=0);var e=ae;return this.plan(function(a,f){b&&b.appear(a),this.animate({turtlePosition:wb(f,d,c)},Ab(f,e),Bb(f),b&&b.resolver(a,!0))}),this}function Wc(b,c,d){a.isArray(c)&&(d=c[1],c=c[0]),d||(d=0),c||(c=0);var e,f=ae;return(e=Hc(this))?(b&&b.appear(0),ub(e,c,d),b&&b.resolve(0),this):(this.plan(function(a,e){b&&b.appear(a);var g=G(e);this.animate({turtlePosition:Ca(g[0]+c)+" "+Ca(g[1]-d)},Ab(e,f),Bb(e),b&&b.resolver(a,!0))}),this)}function Xc(b,c,d){var e=c,f=0,g=0,h=null,i=ae;return a.isNumeric(e)&&a.isNumeric(d)?(f=parseFloat(e),g=parseFloat(d),e=null,h=null):a.isArray(e)?(f=e[0],g=e[1],e=null,h=d):a.isNumeric(d)&&(h=d),this.plan(function(c,d){var j=e;if(null===j&&(j=a(da(d)).pagexy()),j&&!xb(j))try{j=a(j).pagexy()}catch(a){return}if(j&&xb(j))return a.isWindow(d)?(b&&b.appear(c),ka(j,h),void(b&&b.resolve(c))):void(9!==d.nodeType&&(b&&b.appear(c),this.animate({turtlePosition:ca(d,j,h,f,g)},Ab(d,i),Bb(d),b&&b.resolver(c,!0))))}),this}function Yc(a){return function(b,c,d){return this.plan(function(e,f){b.appear(e);var g=this.css("turtlePenDown");this.css({turtlePenDown:"up"}),a.call(this,null,c,d),this.plan(function(){this.css({turtlePenDown:g}),b.resolve(e,!0)})}),this}}function Zc(b){var c=ae;return function(d,e,f){if(a.isNumeric(e)){var g=e;e=f,f=g}return null==f&&(f=8.8),this.plan(function(g,h){var i=Ya(h),j=i.style;e||(e=j&&(j.fillStyle||j.strokeStyle)||"black"),d.appear(g);var k=this.pagexy(),l=Ba(h,!0),m=Ua(e,"fillStyle"),n=Na(i),o=f*l.sx,p=Math.max(0,o-2),q=o+(m.eraseMode?2:0),r=/rgba|hsla/.test(m.fillStyle);null==m.lineWidth&&j&&j.lineWidth&&(m.lineWidth=j.lineWidth),Hc(this)?(b(n,k,q,l.rot,m,!0),d.resolve(g)):this.queue(function(e){a({radius:0}).animate({radius:p},{duration:Ab(h,c),step:function(){r||b(n,k,this.radius,l.rot,m,!1)},complete:function(){b(n,k,q,l.rot,m,!0),d.resolve(g),e()}})})}),this}}function $c(a,b,c,d,e){var f=a.getContext("2d");f.save(),fb(f,e),c===1/0?(f.setTransform(1,0,0,1,0,0),f.fillRect(0,0,a.width,a.height)):(hb(f,a),f.beginPath(),f.arc(b.pageX,b.pageY,c/2,0,2*Math.PI,!1),f.closePath(),f.fill(),e.strokeStyle&&f.stroke()),f.restore()}function _c(a,b,c,d,e){var f=a.getContext("2d");if(f.save(),fb(f,e),c===1/0)f.setTransform(1,0,0,1,0,0),f.fillRect(0,0,a.width,a.height);else{var g=Math.sin((d+45)/180*Math.PI),h=Math.cos((d+45)/180*Math.PI),i=c*h/Math.SQRT2,j=c*g/Math.SQRT2;hb(f,a),f.beginPath(),f.moveTo(b.pageX-i,b.pageY-j),f.lineTo(b.pageX-j,b.pageY+i),f.lineTo(b.pageX+i,b.pageY+j),f.lineTo(b.pageX+j,b.pageY-i),f.closePath(),f.fill(),e.strokeStyle&&f.stroke()}f.restore()}function ad(a,b,c,d,e,f){var g=a.getContext("2d");if(g.save(),fb(g,e),!e.strokeStyle&&e.fillStyle&&(g.strokeStyle=e.fillStyle),c!==1/0){var h=Math.sin(d/180*Math.PI),i=-Math.cos(d/180*Math.PI),j=e.lineWidth||1.62,k=b.pageX+c*h,l=b.pageY+c*i,m=bd(j,k,l,h,i),n=c-m.hs,o=n*h,p=n*i;hb(g,a),n>0&&(g.beginPath(),g.moveTo(b.pageX,b.pageY),g.lineTo(b.pageX+o,b.pageY+p),g.stroke()),f&&cd(g,m)}g.restore()}function bd(a,b,c,d,e){var f=Math.max(1.25*a,a+2),g=2*f,h=g-f/2;return{hs:h,x1:b,y1:c,xm:b-d*h,ym:c-e*h,x2:b-e*f-d*g,y2:c+d*f-e*g,x3:b+e*f-d*g,y3:c-d*f-e*g}}function cd(a,b){a.beginPath(),a.moveTo(b.x2,b.y2),a.lineTo(b.x1,b.y1),a.lineTo(b.x3,b.y3),a.quadraticCurveTo(b.xm,b.ym,b.x2,b.y2),a.closePath(),a.fill()}function dd(a,b,c,d,e,f){var g=e-c,h=f-d,i=Math.sqrt(g*g+h*h),j=g/i,k=h/i,l=bd(b,e,f,j,k);i>l.hs&&(a.beginPath(),a.moveTo(c,d),a.lineTo(l.xm,l.ym),a.lineWidth=b,a.stroke()),cd(a,l)}function fd(b,c){if(c||(c="fx"),"IMG"==b.tagName&&b.src&&!b.complete){var d=a.queue(b,c);0==d.length&&(a.queue(b,c,function(a){Wb(b,null,a)}),i(b,c))}}function kd(b){if(!(a.turtle.hangtime==1/0||hd++<100)){hd=0;var c=(new Date).getTime();return jd?void(c-jd>a.turtle.hangtime&&(Ee.visible()&&Ee.html('<span style="color:red">Oops: program interrupted because it was hanging the browser. Try reducing the number of repetitions.  Or try using <b style="background:yellow">await done defer()</b> or <b style="background:yellow">tick</b> to make an animation.</span>'),a.turtle.interrupt("hung"))):(jd=c,clearTimeout(id),void(id=setTimeout(function(){clearTimeout(id),id=null,jd=null},0)))}}function ld(b,c){if(!a.turtle.nowarn){var e,d=!0;for(e=0;d&&e<c.length;++e)a.queue(c[e]).length>=100&&(d=!1);d||(gd[b]||(gd[b]=1,Ee.visible()?Ee.html('<span style="color:red">Oops: '+b+' may not return useful results when motion is queued. Try <b style="background:yellow">speed Infinity</b></span> or <b style="background:yellow">await done defer()</b> first.'):console.warn(b+' may not return useful results when motion is queued.  Try "speed Infinity" or "await done defer()".')),c.finish())}}function md(a,b,c){a[b]=function(){return b in gd||(Ee.html('<span style="color:red;">'+b+" deprecated.  Use "+c+".</span>"),gd[b]=1),a[c].apply(this,arguments)},a[c].__super__&&k(a[b],a[c])}function pd(){return qd&&a.queue(qd).length>0}function wd(a){if(null===vd.pollTimer){var b=vd.sent[a],c=vd.waiting[a];c&&c.length&&b&&b.length&&(vd.pollTimer=setTimeout(function(){vd.pollTimer=null,c&&c.length&&b&&b.length&&(c.shift().apply(null,b.shift()),wd(a))},0))}}function zd(a,b){if("function"!=typeof b&&"undefined"!=typeof b||!/^\w+\s*$/.test(a)){if("undefined"==typeof b&&/^help\s+\S+$/.test(a))return Gc(/^help\s+(\S+)$/.exec(a)[1]),!0}else{if(b&&b.helptext)return Gc(b),!0;if(a in ud)return Gc(a),!0}return!1}function Ad(a,b,c,d){return a.helptext?d.helptext=a.helptext:b in c&&(d.helptext=c[b].helptext),d.method=a,d.helpname=b,d}function Bd(a,b){var c=[];for(var d in b)!b.hasOwnProperty(d)||d in window||(c.push(d),window[d]=function(b){var c=a[b],d=a;return Ad(c,b,ud,function(){return c.apply(d,arguments)})}(d));return c}function Cd(){qd=null;for(var a=0;a<rd.length;++a)delete window[rd[a]];rd.length=0}function Ed(a){return null!==Hd(a)}function Gd(a){if(!/^[a-z]+$/.test(a))return!1;for(var b=0;b<yd.length;++b)if(yd[b]==a)return!0;return!1}function Hd(b){if(b in Fd)return Fd[b];if(!b||!Gd(b)&&!/^(?:rgb|hsl)a?\([^)]*\)$|^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/i.test(b))return null;var f,c=document.createElement("div"),d=c.style.color,e=null;return c.style.color=b,d!==c.style.color&&(f=/rgba?\s*\(\s*(\d+),\s*(\d+),\s*(\d+)(?:,\s*([.\d]+))?\s*\)/.exec(a(c).css({position:"absolute",top:0,left:0}).appendTo("body").css("color")),f?e=[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),Math.round(255*(f[4]?parseFloat(f[4]):1))]:"transparent"==b&&(e=[0,0,0,0]),a(c).remove()),Fd[b]=e,e}function Id(a){var b=Qa(40,48),c=b.getContext("2d"),d=20,e=26;c.beginPath(),c.arc(d,e,16,0,2*Math.PI,!1),c.closePath(),c.fillStyle=a,c.fill(),c.beginPath();for(var f=[[[5,-14],[3,-11]],[[3,-11],[7,-8],[4,-4]],[[4,-4],[7,0],[4,4]],[[4,4],[7,8],[3,11]],[[7,-8],[12,-9],null],[[7,0],[15,0],null],[[7,8],[12,9],null],[[3,11],[1,15],null]],g=0;g<f.length;g++){var h=f[g];c.moveTo(d+h[0][0],e+h[0][1]);for(var j=1;j<h.length;j++)null!==h[j]&&c.lineTo(d+h[j][0],e+h[j][1]);for(var j=h.length-1;j>=0;j--)null===h[j]?(j--,c.moveTo(d-h[j][0],e+h[j][1])):c.lineTo(d-h[j][0],e+h[j][1])}return c.lineWidth=1.1,c.strokeStyle="rgba(255,255,255,0.75)",c.stroke(),c.beginPath(),c.arc(d,e,15.5,0,2*Math.PI,!1),c.closePath(),c.strokeStyle="rgba(0,0,0,0.4)",c.stroke(),b.toDataURL()}function Jd(a){var b=Qa(40,48),c=b.getContext("2d");return c.beginPath(),c.moveTo(0,48),c.lineTo(20,0),c.lineTo(40,48),c.lineTo(20,36),c.closePath(),c.fillStyle=a,c.fill(),b.toDataURL()}function Kd(a){var b=Qa(40,40),c=b.getContext("2d");return c.beginPath(),c.arc(20,20,18,-5*Math.PI/2,-Math.PI/2),c.closePath(),c.lineTo(20,20),c.stroke(),c.strokeStyle=a,c.lineWidth=4,c.stroke(),b.toDataURL()}function Ld(a,b){b=b||12;var c=Qa(b,b),d=c.getContext("2d"),e=b/2;return d.beginPath(),d.arc(e,e,e,0,2*Math.PI),d.closePath(),d.fillStyle=a,d.fill(),c.toDataURL()}function Md(a){function d(){c.moveTo(19.5,43),c.lineTo(20.5,43),c.lineTo(21.5,43.5),c.lineTo(25.5,36.2),c.lineTo(24,35.5),c.lineTo(23,35.5),c.lineTo(20.5,36.5),c.lineTo(19.5,36.5),c.lineTo(17,35.5),c.lineTo(16,35.5),c.lineTo(14.5,36.2),c.lineTo(18.5,43.5),c.closePath()}function e(){c.moveTo(25.5,12),c.lineTo(25.5,8),c.lineTo(14.5,8),c.lineTo(14.5,12),c.closePath()}var b=Qa(40,48),c=b.getContext("2d");return c.beginPath(),d(),c.fillStyle="#ffcb6b",c.fill(),c.beginPath(),e(),c.fillStyle="#d1ebff",c.fill(),c.beginPath(),c.moveTo(19.5,48),c.lineTo(13,36),c.lineTo(13,1),c.lineTo(14,0),c.lineTo(26,0),c.lineTo(27,1),c.lineTo(27,36),c.lineTo(20.5,48),c.closePath(),d(),c.moveTo(25.5,12),c.lineTo(25.5,8),c.lineTo(14.5,8),c.lineTo(14.5,12),c.closePath(),c.fillStyle=a,c.fill(),b.toDataURL()}function Od(a,b,c){return c||(c=1),function(d){var e=Qa(a,b),f=e.getContext("2d");d||(d="rgba(128,128,128,0.125)"),"transparent"!=d&&(f.fillStyle=d,f.fillRect(0,0,a,b));var g=a/c,h=b/c,i={width:g,height:h,transformOrigin:g/2+"px + "+h/2+"px",opacity:1};return c<1&&(i.imageRendering="pixelated"),{url:e.toDataURL(),css:i}}}function Pd(a){if(!a)return null;if(a in Nd)return Nd[a];var b=a.match(/^(\d+)x(\d+)(?:\/(\d+))?$/);return b?Od(parseFloat(b[1]),parseFloat(b[2]),b[3]&&parseFloat(b[3])):null}function Qd(a,b){var c=a.width||a.height||256,d=a.height||a.width||256,e=a.subpixel||1/(a.scale||1),f=a.color||"transparent",g=Od(c,d,e);return g(f)}function Rd(b,c){if(!b)return null;if(a.isPlainObject(b))return Qd(b,c);if(a.isFunction(b)&&(b.helpname||b.name)&&(b=b.helpname||b.name),b.constructor===a){if(!b.length)return null;b=b.get(0)}if(b.tagName)return"CANVAS"!=b.tagName&&"IMG"!=b.tagName&&"VIDEO"!=b.tagName?null:{img:b,css:{opacity:1}};var d=b.toString().trim().split(/\s+/),e=null,f=null;if(d.length&&(f=Pd(d[d.length-1]),f&&d.pop()),d.length&&Ed(d.join(" "))&&(e=d.join(" "),d.length=0),!f&&e&&(f=Pd(c)),f)return f(e);if(/\//.test(b)){var g=Nb(b).hostname;return!Pb(g)&&Pb(window.location.hostname)&&(b=window.location.protocol+"//"+window.location.host+"/proxy/"+Ob(b)),{url:b,css:{transformOrigin:"50% 50%",opacity:1}}}return null}function Td(a){return null==a?"":String(a).replace(/[&<>"]/g,function(a){return Sd[a]})}function Ud(b,c,d){var e=b&&/^[a-zA-Z]\w*$/.exec(b),f=b&&/^<.*>$/.exec(b),g=Rd(b,d)||null==b&&Rd(d);e&&a("#"+b).length&&(e=!1);var h;g?(h=a("<canvas>"),sb(h,g)):h=a(f?b:"<div>"+Td(b)+"</div>"),b&&"object"==typeof b&&("id"in b&&h.attr("id",b.id),"class"in b&&h.addClass(b.class)),h.css({position:"absolute",display:"table",top:0,left:0}),c&&9!=c.nodeType&&!a.isWindow(c)||(c=Ja()),h.appendTo(c);var i=I(h[0]);return h.css({top:-i[1],left:-i[0]}),h.css({turtlePosition:ca(h[0],a(c).pagexy(),null,0,0),turtleRotation:0,turtleScale:1}),h.addClass("turtle"),e&&(h.attr("id",b),sd&&!window.hasOwnProperty(b)&&(window[b]=h)),h}function Vd(a,b){if("number"==typeof a)return a=Math.ceil(a),"number"==typeof b?(b=Math.ceil(b),Math.floor(Math.random()*(b-a)+a)):Math.floor(Math.random()*a);if("object"==typeof a&&a.length&&a.slice)return a[Math.floor(Math.random()*a.length)];if("normal"==a){var c,d,e,f,g;do c=Math.random(),d=1.7156*(Math.random()-.5),e=c-.449871,f=Math.abs(d)+.386595,g=e*e+f*(.196*f-.25472*e);while(g>.27597&&(g>.27846||d*d>-4*Math.log(c)*c*c));return d/c}return"position"==a?{pageX:Vd(U()+1),pageY:Vd(T()+1)}:"color"==a?"hsl("+Math.floor(360*Math.random())+",100%,50%)":"gray"==a?"hsl(0,0,"+Math.floor(100*Math.random())+"%)":Math.random()}function Yd(b,c){c||"function"!=typeof b||(c=b,b=30);var d=null,e=Math.max(Math.floor(1e3/Math.max(1/86400,b)),0);if(pd()){var f=a(qd);f.plan(function(){d=c})}else d=c;var g={fn:c,timer:setInterval(function(){if(d)try{ae++,Xd.push(g),d()}finally{ae--,Xd.pop(g)}},e)};return Wd.push(g),g.timer}function Zd(a){for(var b=[],c=0;c<Wd.length;++c){var d=Wd[c];null==a||a==d.timer||a==d.fn?clearInterval(Wd[c].timer):b.push(Wd[c])}Wd=b}function $d(a){null==a&&Xd.length&&(a=Xd[Xd.length-1].timer),Zd(a)}function be(c,d){d===b&&a.isFunction(c)&&(d=c,c=1),_d&&(window.clearInterval(_d),_d=null),d&&c&&(_d=window.setInterval(function(){try{ae++,d()}finally{ae--}},1e3/c))}function ce(c){return c===b?1e3/a.fx.speeds.turtle:void(a.fx.speeds.turtle=c>0?1e3/c:0)}function de(c){c===b&&(c=""),a("[id]").each(function(b,d){window[c+d.id]=a("#"+d.id)}),sd=!0}function fe(c){if(c===b&&(c="last"),ee&&a(window).off(a.map(od,function(a,b){return b}).join(" "),ee),c||""===c){ee=function(a){var d,e,f,g,b=[c+a.type];for((a.originalEvent||a)instanceof MouseEvent&&b.push(c+"mouse"),d=0;d<b.length;++d){var f=b[d];if(e=window[f],e&&e.__proto__===a.__proto__){for(g in e)e.hasOwnProperty(g)&&delete e[g];for(g in a)a.hasOwnProperty(g)&&(e[g]=a[g])}else window[f]=a}},window[c+"mouse"]=new a.Event;for(var d in od)window[c+d]=new a.Event;a(window).on(a.map(od,function(a,b){return b}).join(" "),ee)}}function ge(b){var c=10,d=ie(),e=a(window).height()+a(window).scrollTop()+c>=a("html").outerHeight(!0);if(b(),e){var f=a(window).scrollTop(),g=Math.min(d,a("html").outerHeight(!0)-a(window).height());g>f&&a(window).scrollTop(g)}}function ie(){if(!he.timer){he.timer=setTimeout(function(){he.timer=null},0);var b=a("body").offset(),c=b?b.top:8;he.bottomSeen=Math.min(a(window).height()+a(window).scrollTop(),a("body").height()+c)}return he.bottomSeen}function je(b){var c=a(window).scrollTop();b(),a(window).scrollTop(c)}function ke(){var a=arguments;ge(function(){var b=document.body.lastChild;b&&"PRE"==b.tagName||(b=document.createElement("pre"),document.body.appendChild(b));for(var c=0;c<a.length;c++)b.appendChild(document.createTextNode(String(a[c])))})}function le(){var a=this;ge(function(){a.result.appendTo("body"),a.setup&&a.setup()})}function me(c,d){var e="<"+d+' style="display:table">',f="</"+d+">";if(c===b||null===c)return{result:a(e+"<br>"+f)};var h=null;return c=""+c,/^\s*<.*>\s*$/.test(c)&&(h=a(c)),null!=h&&1==h.length&&1==h[0].nodeType||(h=a(e+c+f)),{result:h}}function ne(b,c){function k(b){return function(f){e||h&&"change"==f.type||(e=!0,a(this).prop("checked",!0),d.find("input[type=radio]").prop("disabled",!0),c(b))}}function l(a){return function(){e||(g=a,m())}}function m(a){a||(h+=1,setTimeout(function(){h-=1},0),d.find("input").eq(g).prop("checked",!0)),d.find("input").eq(g).focus()}function n(b,c){a.isFunction(b)&&(b=(f+1).toString());var e=a.isFunction(c)||null==c?b:c,g=a('<input type="radio" name="menu" class="turtleinput">').attr("value",e).on("change click",k(c)),h=a('<label style="display:table">').append(g).append(b).on("click",k(c)).on("mousedown",l(f)),j=b&&b.toString().substr(0,1).toUpperCase();!j||j in i||(i[j]=f),f+=1,d.append(h)}var j,d=a("<form>").css({display:"table",marginLeft:"20px"}).submit(function(){return!1}),e=!1,f=0,g=0,h=0,i={};if(c||(c=function(c){a.isFunction(c)&&c.call(null)}),a.isArray(b))for(var o=0;o<b.length;++o)n(b[o],b[o]);else if(a.isPlainObject(b))for(j in b)n(j,b[j]);else n(b,b);return d.on("keydown",function(a){if(a.which>=37&&a.which<=40||32==a.which){var b=d.find("input").index(d.find(":checked"));return g=b>=0&&g!=b?b:b<0?0:a.which>=39||32==a.which?(g+1)%f:(g+f-1)%f,m(),!1}13==a.which?d.find(":checked").click():String.fromCharCode(a.which)in i&&(g=i[String.fromCharCode(a.which)],m())}),{result:d,setup:function(){je(function(){m(!0)})}}}function oe(c,d){a.isFunction(c)&&d===b&&(d=c,c=null),null!==c&&c!==b||(c="button");var e=a('<button class="turtleinput">'+Td(c)+"</button>");return d&&e.click(d),{result:e}}function pe(b,c,d){function i(){g||(g=setTimeout(function(){g=null},1e3))}function j(){if(!k())return!1;var b=e.val();g&&h==b||(i(),h=b,e.remove(),f.append(b).css({display:"table"}),(d>0||d>=0&&a.isNumeric(b)&&""+parseFloat(b)==b)&&(b=parseFloat(b)),f.prop("value",b),c&&setTimeout(function(){c.call(f,b)},0))}function k(){if(d<=0)return!0;var b=e.val(),c=b.replace(/[^0-9\.]/g,"");return!(b!=c||!a.isNumeric(c))||(e.val(c),!1)}function l(a){if(13==a.which){if(!k())return!1;j()}if(d>0&&a.which>=32&&a.which<=127&&(a.which<"0".charCodeAt(0)||a.which>"9".charCodeAt(0))&&(a.which!=".".charCodeAt(0)||~e.val().indexOf(".")))return!1}a.isFunction(b)&&!c&&(c=b,b=null),b=a.isNumeric(b)||b?b:"&rArr;";var e=a('<input class="turtleinput">').css({margin:0,padding:0}),f=a('<label style="display:table">'+b+"&nbsp;</label>").append(e),g=null,h=e.val();return e.on("keypress keydown",l),e.on("change",j),{result:f,setup:function(){if(i(),d<0){var a=f.parent().width(),b=a+f.offset().left-e.offset().left,c=Math.max(256,a/2),g=b<c?a:b,h=e.outerWidth(!0)-e.width();e.width(g-h)}je(function(){e.focus()})}}}function qe(b,c){a.isNumeric(c)&&(c={height:c});var d=a("<img>");return b&&d.attr("src",Sb(b)),c&&d.css(c),{result:d}}function re(b,c,d,e){var g,h,f=null;if(a.isArray(b))for(e=d,d=c,f=b,b=f.length,c=0,g=0;g<b;g++)c=a.isArray(f[g])?Math.max(c,f[g].length):Math.max(c,1);var i=["<table>"];for(g=0;g<b;g++){for(i.push("<tr>"),h=0;h<c;h++)f?a.isArray(f[g])&&h<f[g].length?i.push("<td>"+Td(f[g][h])+"</td>"):a.isArray(f[g])||0!=h?i.push("<td></td>"):i.push("<td>"+Td(f[g])+"</td>"):i.push("<td></td>");i.push("</tr>")}i.push("</table>");var j=a(i.join("")),k={borderCollapse:"collapse",width:"35px",height:"35px",border:"1px solid black",tableLayout:"fixed",textAlign:"center",margin:"0",padding:"0"};return j.css(a.extend({},k,{width:"auto",height:"auto",maxWidth:"auto",border:"none"},e)),j.find("td").css(a.extend({},k,d)),{result:j}}function se(a,b){return a+"("+Array.prototype.join.call(b,",")+")"}function te(arguments,a,b){var c=0,d=[],e={};for(var f in b){var g=b[f];for(c=a;c<arguments.length;++c)if(!~d.indexOf(c)){if("*"==g)break;if(g instanceof RegExp&&g.test(arguments[c]))break;if(g instanceof Function&&g(arguments[c]))break;if(g==typeof arguments[c])break}c<arguments.length&&(d.push(c),e[f]=arguments[c])}if(d.length+a<arguments.length){var h=[];for(c=a;c<arguments.length;++c)~d.indexOf(c)||h.push(arguments[c]);e.extra=h}return e}function Ne(b){if(0===arguments.length)b={};else if(2==arguments.length){var c={};c[arguments[0]]=arguments[1],b=c}else 1==arguments.length&&"function"==typeof arguments[0]&&(b={eval:arguments[0]});return"jQuery"in b&&(a=b.jQuery),"eval"in b&&(Ke[""].e=b.eval),"this"in b&&(Ke[""].t=b.this),"element"in b&&(Ce=b.element),"autoscroll"in b&&(Be=b.autoscroll),"linestyle"in b&&(ze=b.linestyle),"depth"in b&&(Ae=b.depth),"panel"in b&&(De=b.panel),"height"in b&&(Ie=b.height),"title"in b&&(Fe=b.title),"console"in b&&(Ge=b.console),"history"in b&&(He=b.history),"coffee"in b&&(Le=b.coffee),"abbreviate"in b&&(zf=b.abbreviate),"consolehook"in b&&(Af=b.consolehook),"noconflict"in b&&We(b.noconflict),De&&(Ce="#_testlog",Be="#_testscroll",Xe(Nf)),Oe()}function Oe(a,b,c){return arguments.length<=1?(arguments.length||(a=""),we+".scope("+gf(a)+","+Me+",this)"):void(Ke[a]={e:b,t:c})}function Pe(a,b){1==arguments.length&&(b=a,a="");var c=Ke[""].e,d=Ke[""].t;return Ke.hasOwnProperty(a)&&(Ke[a].e&&(c=Ke[a].e),Ke[a].t&&(d=Ke[a].t)),c.call(d,b)}function Se(a){var b=Le||window.CoffeeScript,c=b.compile(a,{bare:1});return c&&(c=c.replace(Re,"")),c}function Te(){Ee.repr=tf,Ee.html=bf,Ee.noconflict=We,Ee.init=Ne,Ee.scope=Oe,Ee.eval=Pe,Ee.barecs=Se,Ee.here="eval("+we+".init())",Ee.clear=Ff,Ee.hide=Bf,Ee.show=Cf,Ee.visible=Df,Ee.enter=Ef,Ee.js=Me,Ee.cs="(function(){return eval("+we+".barecs(arguments[0]));})",Ee.version=xe,window[we]=Ee}function Ue(a){return{name:a,has:window.hasOwnProperty(a),value:window[a]}}function Ve(a){a.has?window[a.name]=a.value:delete window[a.name]}function We(a){return a&&"string"==typeof a||(a="see"+(1+Math.random()+"").substr(2)),ye&&Ve(ye),we=a,ye=Ue(a),Te(),Ee}function Xe(b){function c(a,b){function c(a,b){a.onload=a.onreadystatechange=b}var d=document.createElement("script"),e=document.getElementsByTagName("head")[0],f=1;c(d,function(){!f||d.readyState&&!{loaded:1,complete:1}[d.readyState]||(f=0,b(),c(d,null),e.removeChild(d))}),d.src=a,e.appendChild(d)}return!ve||a&&a.fn&&a.fn.jquery?void b():void c("//ajax.googleapis.com/ajax/libs/jquery/"+ve+"/jquery.min.js",function(){a=jQuery.noConflict(!0),b()})}function bf(a){af.push('<samp class="_log">'),af.push(a),af.push("</samp>"),wf()}function cf(a){var b=Object.prototype.toString.call(a),c=b.substring(8,b.length-1);if("Object"==c){if("length"in a&&"slice"in a&&"number"==typeof a.length)return"Array";if("originalEvent"in a&&"target"in a&&"type"in a)return cf(a.originalEvent)}return c}function df(a){switch(a){case"String":case"Number":case"Boolean":case"Undefined":case"Date":case"RegExp":case"Null":return!0}return!1}function ef(a){return a.nodeType&&a.nodeName&&"function"==typeof a.cloneNode}function ff(a,b){return b&&b>3&&a.length>b?a.substring(0,Math.floor(b/2)-1)+"..."+a.substring(a.length-(Math.ceil(b/2)-2)):a}function gf(a,b){function c(a){if($e.hasOwnProperty(a))return $e[a];var b="0"+a.charCodeAt(0).toString(16);return"\\x"+b.substring(b.length-2)}return a.indexOf('"')==-1||a.indexOf("'")!=-1?ff('"'+pf(a.replace(/[\0-\x1f\x7f-\x9f"\\]/g,c))+'"',b):ff("'"+pf(a.replace(/[\0-\x1f\x7f-\x9f'\\]/g,c))+"'",b)}function hf(a,b){var c=cf(a);if("String"==c)return gf(a,b);if("Undefined"==c||"Null"==c)return c.toLowerCase();if(df(c))return""+a;if("Array"==c&&0===a.length)return"[]";if("Object"==c&&lf(a))return"{}";if(ef(a)&&1==a.nodeType){if(a.hasAttribute("id"))return a.tagName.toLowerCase()+"#"+pf(a.getAttribute("id"));if(a.hasAttribute("class")){var d=a.getAttribute("class").split(" ")[0];if(d)return a.tagName.toLowerCase()+"."+pf(d)}return a.tagName.toLowerCase()}return c}function jf(a){return 3!=a.nodeType||/[^\s]/.exec(a.textContent)}function kf(a){return a.replace(/^\s*\n/,"")}function lf(a,b,c){var d=cf(a);if(df(d))return!0;if(!b&&"Array"==d)return!c||a.length<=c;if(ef(a))return 9!=a.nodeType&&11!=a.nodeType&&(1!=a.nodeType||(null===a.firstChild||null===a.firstChild.nextSibling&&3==a.firstChild.nodeType&&a.firstChild.textContent.length<=c));if("Function"==d){var e=a.toString();return e.length-e.indexOf("{")<=c}if("Error"==d)return!!a.stack;var f=0;for(var g in a)if(a.hasOwnProperty(g)){if(f+=1,b&&!df(cf(a[g])))return!1;if(c&&f>c)return!1}return!0}function mf(a,b){var c;if("outerHTML"in a){c=lf(a,!0,b);var d=a.cloneNode(c).outerHTML,e=null;if(!c){var f=/^(.*)(<\/[^\s]*>$)/.exec(d);f&&(e=f[2],d=f[1])}return[pf(d),e&&pf(e)]}if(1==a.nodeType){for(var g=["<"+a.tagName],h=0;h<a.attributes.length;++h)g.push(mf(a.attributes[h],b)[0]);return c=lf(a,!0,b),c&&a.firstChild?[pf(g.join(" ")+">"+a.firstChild.textContent+"</"+a.tagName+">"),null]:[pf(g.join(" ")+(a.firstChild?">":"/>")),a.firstChild?pf("</"+a.tagName+">"):null]}return 2==a.nodeType?[pf(a.name+'="'+pf(ff(a.value,b),'"')+'"'),null]:3==a.nodeType?[pf(kf(a.textContent)),null]:4==a.nodeType?["<![CDATA["+pf(ff(a.textContent,b))+"]]>",null]:8==a.nodeType?["<!--"+pf(ff(a.textContent,b))+"-->",null]:10==a.nodeType?["<!DOCTYPE "+pf(a.nodeName)+">",null]:[a.nodeName,null]}function nf(a,b){var c=cf(a);if(df(c))return hf(a,b);if(ef(a)){var d=mf(a,b);return d[0]+(d[1]?"..."+d[1]:"")}if("Function"==c){var e=a.toString();return e.length-e.indexOf("{")>b&&(e=e.replace(/\{(?:.|\n)*$/,"").trim()),e}if(("Error"==c||"ErrorEvent"==c)&&"message"in a)return a.message;var f=[];if("Array"==c&&a.length<b){for(var g=a.length>=5,h=g&&a[0],i=0;i<a.length;++i)g&&a[i]!==h&&(g=!1),f.push(hf(a[i],b));return g?"["+hf(h,b)+"]  "+a.length:"["+f.join(", ")+"]"}if(lf(a,!1,b)){for(var j in a)a.hasOwnProperty(j)&&f.push(of(j)+": "+hf(a[j],b));return("Object"==c?"{":c+"{")+f.join(", ")+"}"}return"Array"==c?"Array("+a.length+")":c}function of(a){return/^\w+$/.exec(a)?a:gf(a)}function pf(a,b){var c=/[<>&]/g;return b&&(c=new RegExp("[<>&"+b+"]","g")),a.replace(c,function(a){return"<"==a?"&lt;":">"==a?"&gt;":"&"==a?"&amp;":'"'==a?"&quot;":"&#"+a.charCodeAt(0)+";"})}function qf(a){a=a.replace(/^\s*\n/,"");var b=a.match(/^\s*\S/gm),c=b.length&&b[0].length-1,d=1;
    for(b.length>1&&"{"==b[0].trim()&&(c=b[1].length-1,d=2);d<b.length;++d)if(c=Math.min(b[d].length-1,c),c<=0)return a;var e=new RegExp("^\\s{"+c+"}","mg");return a.replace(e,"")}function rf(a,b,c,d){if(d.push('<label class="_log"><input type="checkbox"><span>'),a&&d.push(a),ef(b)){var e=mf(b,10);d.push(e[0]),d.push("</span><ul>");for(var f=b.firstChild;f;f=f.nextSibling)jf(f)&&(3==f.nodeType?(d.push("<li><samp>"),d.push(qf(f.textContent)),d.push("</samp></li>")):lf(f,!0,20)||c<=1?d.push("<li>"+nf(f,20)+"</li>"):rf("",f,c-1,d));d.push("</ul>"),e[1]&&(d.push("<span>"),d.push(e[1]),d.push("</span>")),d.push("</label>")}else{d.push(nf(b,10)),d.push("</span><ul>");var g=cf(b);if("Function"==g){var h=b.toString(),i=/\{(?:.|\n)*$/.exec(h);i&&(h=i[0]),d.push("<li><samp>"),d.push(pf(qf(h))),d.push("</samp></li>")}else if("Error"==g)d.push("<li><samp>"),d.push(pf(b.stack)),d.push("</samp></li>");else if("Array"==g){for(var j=0;j<Math.min(100,b.length);++j){try{m=b[j]}catch(a){m=a}lf(m,!0,20)||c<=1||"global"==cf(m)?d.push("<li>"+j+": "+nf(m,100)+"</li>"):rf(j+": ",m,c-1,d)}b.length>100&&d.push("<li>length="+b.length+" ...</li>")}else{var k=0;for(var l in b)if(b.hasOwnProperty(l)){if(k+=1,k>100)continue;var m;try{m=b[l]}catch(a){m=a}lf(m,!0,20)||c<=1||"global"==cf(m)?(d.push("<li>"),d.push(of(l)),d.push(": "),d.push(nf(m,100)),d.push("</li>")):rf(of(l)+": ",m,c-1,d)}k>100&&d.push("<li>"+k+" properties total...</li>")}d.push("</ul></label>")}}function sf(){if(!Ze&&!window.document.getElementById("_logcss")){var a=window.document.createElement("style");a.id="_logcss",a.innerHTML=(ze?"samp._log{"+ze+"}":"")+Ye,window.document.head.appendChild(a),Ze=!0}}function tf(a,b,c){b=b||3;var d=c||[],e=cf(a);if("Error"==e||"ErrorEvent"==e?(d.push('<span style="color:red;">'),rf("",a,b,d),d.push("</span>")):df(e)?d.push(hf(a)):lf(a,!0,100)||b<=0?d.push(nf(a,100)):rf("",a,b,d),!c)return d.join("")}function uf(b,c){switch(typeof b){case"string":return"body"==b?document.body:document.querySelector?document.querySelector(b):a?a(b)[0]:null;case"undefined":return c;case"boolean":return b?c:null;default:return b}return null}function vf(){var a=!1,b=uf(Be,null);return b&&(a=b.scrollHeight-b.scrollTop-10<=b.clientHeight),a?function(){b.scrollTop=b.scrollHeight-b.clientHeight}:function(){}}function wf(){var a=uf(Ce,null);if(a&&a.appendChild&&af.length){sf();var b=window.document.createElement("samp");b.innerHTML=af.join(""),af.length=0;for(var c=vf();child=b.firstChild;)a.appendChild(child);c()}!_e&&af.length?_e=setTimeout(function(){timer=null,wf()},100):_e&&!af.length&&(clearTimeout(_e),_e=null)}function Bf(){a("#_testpanel").hide()}function Cf(){a("#_testpanel").show()}function Df(){return a("#_testpanel").is(":visible")}function Ef(b){a("#_testinput").val(b)}function Ff(){xf&&a("#_testlog").find("._log").not("#_testpaneltitle").remove()}function Gf(a){return'<samp class="_logcaret" style="color:'+a+';"></samp>'}function Hf(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection():document.selection?document.selection.createRange().text:void 0}function If(a){return'<samp class="_log" id="_testpaneltitle" style="font-weight:bold;">'+a+"</samp>"}function Kf(){if(He){var c,b={height:Ie,history:[]};try{c=window.JSON.parse(window.localStorage[He])}catch(a){c=Jf||{}}return c&&c.slice&&c.length?(b.history=c,b):(a.extend(b,c),b)}}function Lf(a){if(He){var b=Kf(),c=!1;if("history"in a&&a.history.length&&(!b.history.length||b.history[b.history.length-1]!==a.history[a.history.length-1])&&(b.history.push(a.history[a.history.length-1]),c=!0),"height"in a&&a.height!==b.height&&(b.height=a.height,c=!0),c)try{window.localStorage[He]=window.JSON.stringify(b)}catch(a){Jf=b}}}function Mf(){return window.innerHeight||a(window).height()}function Nf(){if(xf)Fe&&(a("#_testpaneltitle").length?a("#_testpaneltitle").html(Fe):a("#_testlog").prepend(If(Fe))),a("#_testpanel").show();else if(!window.document.getElementById("_testlog")&&window.document.body){sf();var b=Kf(),c=Fe?If(Fe):"";b.height>Mf()-50&&(b.height=Math.min(Mf(),Math.max(10,Mf()-50))),a("body").prepend('<samp id="_testpanel" class="turtlefield" style="overflow:hidden;z-index:99;position:fixed;bottom:0;left:0;width:100%;height:'+b.height+'px;background:rgba(240,240,240,0.8);font:10pt monospace;-webkit-transform:translateZ(0);"><samp id="_testdrag" style="cursor:row-resize;height:6px;width:100%;display:block;background:lightgray"></samp><samp id="_testscroll" style="overflow-y:scroll;overflow-x:hidden;display:block;width:100%;height:'+(b.height-6)+'px;"><samp id="_testlog" style="display:block">'+c+'</samp><samp class="_log" style="position:relative;display:block;">'+Gf("blue")+'<input id="_testinput" class="_log" style="width:100%;margin:0;border:0;font:inherit;background:rgba(255,255,255,0.8);"></samp></samp>'),xf=!0,wf();var d=0,e={};a("#_testinput").on("keydown",function(c){if(13==c.which){var f=a(this).val();if(a(this).val(""),!f.trim().length||b.history.length&&b.history[b.history.length-1]===f||(b.history.push(f),Lf({history:[f]})),e={},d=0,bf('<samp class="_log" style="margin-left:-1em;">'+Gf("lightgray")+pf(f)+"</samp>"),a(this).select(),f.trim().length&&":"==f.trim()[0]){var g=f.trim().substring(1).trim();if(!g||Ke.hasOwnProperty(g)){Je=g;var h=g?"scope "+g:"default scope";bf('<span style="color:blue">switched to '+h+"</span>")}else bf('<span style="color:red">no scope '+g+"</span>");return}a.turtle.interrupt("reset");var i=!1;try{var j;try{j=Pe(Je,f)}finally{if(Af&&Af(f,j))i=!0;else{for(var k=zf.length-1;k>=0&&j!==zf[k];--k);k<0&&bf(tf(j))}}}catch(a){i||Ee(a)}}else if(38==c.which||40==c.which){e[d]=a(this).val(),d+=38==c.which?1:-1,d=Math.max(0,Math.min(b.history.length,d));var l=e[d]||b.history[b.history.length-d];"undefined"==typeof l&&(l=""),a(this).val(l),this.selectionStart=this.selectionEnd=l.length,c.preventDefault()}}),a("#_testdrag").on("mousedown",function(c){var h,d=this,e=a("#_testpanel").height()+c.pageY,f=a("#_testdrag").height(),g=c.which;return d.setCapture&&d.setCapture(!0),h=function(d){if("blur"!=d.type&&d.which==g){var i=Mf(),j=Math.max(f,Math.min(i,e-d.pageY)),k=vf();a("#_testpanel").height(j),a("#_testscroll").height(j-f),k()}("mouseup"==d.type||"blur"==d.type||"mousemove"==d.type&&d.which!=g)&&(a(window).off("mousemove mouseup blur",h),document.releaseCapture&&document.releaseCapture(),a("#_testpanel").height()!=b.height&&(b.height=a("#_testpanel").height(),Lf({height:b.height})))},a(window).on("mousemove mouseup blur",h),!1}),a("#_testpanel").on("mouseup",function(b){if(!Hf()){var c=a("#_testscroll").scrollTop();a("#_testinput").focus(),a("#_testscroll").scrollTop(c)}})}yf&&xf?clearTimeout(yf):xf||yf||(yf=setTimeout(Nf,100))}function Of(a,b){var c=document.createElement("canvas");return b||(b=0),c.width=a.width,c.height=a.height,ctx=c.getContext("2d"),ctx.drawImage(a,0,0),Pf(c,b)}function Pf(a,b){var c=a.getContext("2d");data=c.getImageData(0,0,a.width,a.height).data;for(var f,g,d=[],e=256*b,h=1/0,i=-1,j=0;j<a.height;++j){f=1/0,g=-1;for(var k=0;k<a.width;++k)data[4*j*a.width+4*k+3]>e&&(g<0&&(f=k),g=k);(g>=0||i>=0)&&(d.push({pageX:Math.min(f,h),pageY:j}),d.push({pageX:Math.max(g,i)+1,pageY:j})),h=f,i=g}return i>=0&&(d.push({pageX:h,pageY:a.height}),d.push({pageX:i+1,pageY:a.height})),ua(d)}function Qf(a,b){var c=a.getContext("2d"),d=a.width,e=a.height;if(j=0,c.save(),c.beginPath(),c.moveTo(0,0),c.lineTo(d,0),c.lineTo(d,e),c.lineTo(0,e),c.closePath(),b.length)for(c.moveTo(b[0].pageX,b[0].pageY);j<b.length;j+=1)c.lineTo(b[j].pageX,b[j].pageY);c.closePath(),c.clip(),c.clearRect(0,0,d,e),c.restore()}function Rf(a,b,c,d,e){for(var f=0;f<a.length;f++)a[f].pageX=a[f].pageX*b+d,a[f].pageY=a[f].pageY*c+e}var b=void 0,c={}.hasOwnProperty,d=jQuery(function(){}),e=!1,f=0,g=0,h=[];if(!a.cssHooks)throw"jQuery 1.4.3+ is needed for jQuery-turtle to work";var n=l("transform"),o=l("transformOrigin");if(n&&m()){var Ia={attached:!1,surface:null,field:null,ctx:null,canvas:null,timer:null,fieldMouse:!1,fieldHook:!1,subpixel:1},Mb=document.createElement("a"),Ub={},_b=function(b){function c(b,c){this.constructor=jQuery,this.constructor.prototype=Object.getPrototypeOf(this),b&&"string"!=typeof b&&!a.isPlainObject(b)&&"number"!=typeof b||(b=Ud(b,c,"256x256")),jQuery.fn.init.call(this,b,c,d)}return k(c,b),c.prototype.pushStack=function(){var a,b,c;for(b=jQuery.fn.pushStack.apply(this,arguments),a=b.length,c=a===this.length;c&&a--;)c=c&&this[a]===b[a];return c?this:b},c}(jQuery.fn.init),ac=function(b){function c(b){b&&b.jquery&&a.isFunction(b.canvas)&&(b=b.canvas()),!b||"CANVAS"==b.tagName&&"function"==typeof b.getContext||(b=a(b).filter("canvas").get(0)),b&&"CANVAS"==b.tagName&&"function"==typeof b.getContext||(b=null);var d=b?b.parentElement:null,e={width:0,height:0,color:transparent};c.__super__.constructor.call(this,e,d),this.each(function(){var a=Ya(this);a.speed=1/0,a.drawOnCanvas=b,this.style.display="none",b&&(this.style[n]=Da(Ba(b,!0)))})}return k(c,b),c}(_b),bc=function(a){function b(a,c){b.__super__.constructor.call(this,Ud(a,c,"turtle"))}return k(b,a),b}(_b),cc=function(b){function c(b,d){var e="",f=!1,g=!1,h=!1;if(a.isPlainObject(b)){for(key in b)e+=" "+key+'="'+Td(b[key])+'"';f="src"in b,g="autoplay"in b,h="width"in b||"height"in b,!h||"height"in b||(e+=" height="+Math.round(3*b.width/4)),!h||"width"in b||(e+=" width="+Math.round(4*b.height/3))}g||(e+=" autoplay"),h||(e+=" width=320 height=240"),c.__super__.constructor.call(this,"<video"+e+">"),f||this.capture()}return k(c,b),c.prototype.capture=function(){return this.queue(function(b){var c=this,d=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return d?void d.call(navigator,{video:!0},function(d){if(d){var e=Ya(c),f=(""+Math.random()).substr(2);e.stream&&e.stream.stop(),e.stream=d,a(c).on("play.capture"+f,function(){a(c).off("play.capture"+f),b()}),c.src=window.URL.createObjectURL(d)}},function(){b()}):void b()})},c.prototype.cut=function(){return this.plan(function(){var a=this.data("turtleData");a.stream&&(a.stream.stop(),a.stream=null),this.attr("src","")})},c}(_b),dc=function(a){function b(a){var c,h,i,j,k,l,m,q,r,s,t,n=null,o=this;a=p(a,"keys"),s=Ac.pitchToMidi(a.lowest),t=Ac.pitchToMidi(a.highest);var u=this._geom={};if(u.lineWidth="lineWidth"in a?a.lineWidth:1.5,u.color="color"in a?a.color:"white",u.blackColor="blackColor"in a?a.blackColor:"black",u.lineColor="lineColor"in a?a.lineColor:"black",i=Math.ceil(u.lineWidth),h=422,c=4.2,null!=s&&null!=t?n=e(t)-e(s)+1:"keys"in a&&(n=Math.ceil(a.keys/12*7)),n&&(c=n/5,h=Math.sqrt(42e3*c)+i),l="width"in a?a.width:"height"in a?Math.round((a.height-i)*c+i):h,k="height"in a?a.height:Math.round((l-i)/c+i),n||(n=Math.max(1,Math.round((l-i)/(k-i)*5))),m=Math.min(e(108),Math.ceil(42+(n-1)/2)),u.highest=null!=t?t:null!=s&&"keys"in a?s+a.keys-1:f(null!=s?e(s)+n-1:m),u.lowest=null!=s?s:"keys"in a?u.highest-a.keys+1:Math.min(u.highest,f(e(u.highest)-n+1)),j=e(u.lowest),m=e(u.highest),g(u.highest)&&(m+=1),n=m-j+1,u.kw=(l-i)/n,u.kh=("height"in a?a.height-i:5*u.kw)+(i-u.lineWidth),u.bkw=4*u.kw/7,u.bkh=3*u.kh/5,u.halfex=i/2,u.leftpx=j*u.kw,u.rightpx=(m+1)*u.kw,u.ckw=(3*u.kw-2*u.bkw)/3,u.fkw=(4*u.kw-3*u.bkw)/4,b.__super__.constructor.call(this,{width:Math.ceil(u.rightpx-u.leftpx+i),height:Math.ceil(u.kh+i)}),"timbre"in a)r=a.timbre;else for(q in Ac.defaultTimbre)q in a&&(r||(r={}),r[q]=a[q]);return r||(r="piano"),this.css({turtleTimbre:r}),this.on("noteon",function(a){o.drawkey(a.midi,d(a.midi))}),this.on("noteoff",function(a){o.drawkey(a.midi)}),this.draw(),this}function d(a){return c[(a%12+12)%12]}function e(a){return floor((a+7)/12*7)}function f(a){return ceil(a/7*12)-7}function g(a){return h(a)>=8}function h(a){return[1,8,2,9,3,4,10,5,11,6,12,7][(a%12+12)%12]}function i(a,b,c){var d,f,i,j,k,l,m;switch(l=b.halfex+b.kw*e(c)-b.leftpx,m=b.halfex,d=h(c),i=c===b.lowest,k=c===b.highest,f=0,j=0,d){case 1:j=b.kw-b.ckw;break;case 2:j=f=(b.kw-b.ckw)/2;break;case 3:f=b.kw-b.ckw;break;case 4:j=b.kw-b.fkw;break;case 5:f=b.fkw+b.bkw-b.kw,j=2*b.kw-2*b.fkw-b.bkw;break;case 6:f=2*b.kw-2*b.fkw-b.bkw,j=b.fkw+b.bkw-b.kw;break;case 7:f=b.kw-b.fkw;break;case 8:l+=b.ckw;break;case 9:l+=2*b.ckw+b.bkw-b.kw;break;case 10:l+=b.fkw;break;case 11:l+=2*b.fkw+b.bkw-b.kw;break;case 12:l+=3*b.fkw+2*b.bkw-2*b.kw}return i&&(f=0),k&&(j=0),g(c)?(a.moveTo(l,m+b.bkh),a.lineTo(l+b.bkw,m+b.bkh),a.lineTo(l+b.bkw,m),a.lineTo(l,m),a.closePath()):(a.moveTo(l,m+b.kh),a.lineTo(l+b.kw,m+b.kh),a.lineTo(l+b.kw,m+b.bkh),a.lineTo(l+b.kw-j,m+b.bkh),a.lineTo(l+b.kw-j,m),a.lineTo(l+f,m),a.lineTo(l+f,m+b.bkh),a.lineTo(l,m+b.bkh),a.closePath())}k(b,a),b.prototype.drawkey=function(a,b){var c,d=this._geom;if(d.lowest<=a&&a<=d.highest)return null==b&&(b=g(a)?d.blackColor:d.color),c=this.canvas().getContext("2d"),c.save(),c.beginPath(),i(c,d,a),c.fillStyle=b,c.strokeStyle=d.lineColor,c.lineWidth=d.lineWidth,c.fill(),c.stroke(),c.restore()},b.prototype.draw=function(){for(var a=this._geom.lowest;a<=this._geom.highest;++a)this.drawkey(a)};var c=["#db4437","#ff5722","#f4b400","#ffeb3b","#cddc39","#0f9d58","#00bcd4","#03a9f4","#4285f4","#673ab7","#9c27b0","#e91e63"];return b}(_b),ec=!1,gc=function(){for(var a="undefined"!=typeof window?window.navigator.userAgent:"",b=/OS X/.test(a),c=/Opera/.test(a),d=!/like Gecko/.test(a)&&!c,h={0:"null",1:"mouse1",2:"mouse2",3:"break",4:"mouse3",5:"mouse4",6:"mouse5",8:"backspace",9:"tab",12:"clear",13:"enter",16:"shift",17:"control",18:"alt",19:"pause",20:"capslock",21:"hangulmode",23:"junjamode",24:"finalmode",25:"kanjimode",27:"escape",28:"convert",29:"nonconvert",30:"accept",31:"modechange",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",41:"select",42:"print",43:"execute",44:"snapshot",45:"insert",46:"delete",47:"help",91:"meta",92:"meta",93:b?"meta":"menu",95:"sleep",106:"numpad*",107:"numpad+",108:"numpadenter",109:"numpad-",110:"numpad.",111:"numpad/",144:"numlock",145:"scrolllock",160:"shiftleft",161:"shiftright",162:"controlleft",163:"controlright",164:"altleft",165:"altright",166:"browserback",167:"browserforward",168:"browserrefresh",169:"browserstop",170:"browsersearch",171:"browserfavorites",172:"browserhome",173:b&&d?"-":"volumemute",174:"volumedown",175:"volumeup",176:"mediatracknext",177:"mediatrackprev",178:"mediastop",179:"mediaplaypause",180:"launchmail",181:"launchmediaplayer",182:"launchapp1",183:"launchapp2",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"meta",224:"meta",226:"altgraph",229:"process",231:c?"`":"unicode",246:"attention",247:"crsel",248:"exsel",249:"eraseeof",250:"play",251:"zoom",252:"noname",253:"pa1",254:"clear"},i=48;i<91;++i)h[i]=String.fromCharCode(i).toLowerCase();for(i=96;i<106;++i)h[i]="numpad"+(i-96);for(i=112;i<136;++i)h[i]="f"+(i-111);return h}(),hc=function(){function a(a,b){return function(c){var e,g=c.which;a?e="mouse"+g:(!g&&c.whichSynth&&(g=c.whichSynth),e=gc[g],g>=160&&g<=165&&d(e.replace(/(?:left|right)$/,""),b)),d(e,b)}}function d(a,b){null!=a&&(b?c[a]=!0:delete c[a])}function e(){for(var a in c)delete c[a]}function f(a){e();for(var c in b)a?window.addEventListener(c,b[c],!0):window.removeEventListener(c,b[c])}function g(){var b,a=[];for(b in c)c[b]&&a.push(b);return a}function h(a){return fc(),a?(a=a.replace(/\s/g,"").toLowerCase(),!!c[a]):g()}var b={mousedown:a(1,1),mouseup:a(1,0),keydown:a(0,1),keyup:a(0,0),blur:e},c={};return h.enable=f,h.list=g,h}(),uc=null,Ac=function(){function a(a){this._atop=xc(),this._timbre=G(a,this._atop),this._queue=[],this._minQueueTime=1/0,this._maxScheduledTime=0,this._unsortedQueue=!1,this._startSet=[],this._finishSet={},this._cleanupSet=[],this._callbackSet=[],this._handlers={},this._now=null,wc()&&this.silence()}function c(a){function v(a){a=a||"",(a||i===e)&&(e.voice.hasOwnProperty(a)?(i=e.voice[a],s=i.accent):(i={id:a,accent:{slurred:0}},e.voice[a]=i,s=i.accent))}function w(){return e.V?e.V.split(/\s+/)[0]:""}var m,o,p,q,t,u,c=a.split("\n"),e={voice:{}},i=e,r={},s={};for(m=0;m<c.length;++m)if(p=b.exec(c[m])){switch(p[1]){case"V":i!==e&&v(p[2].split(" ")[0]);break;case"M":d(p[2],i);break;case"L":f(p[2],i);break;case"Q":g(p[2],i)}i.hasOwnProperty(p[1])?i[p[1]]+="\n"+p[2]:i[p[1]]=p[2],"K"==p[1]&&i===e&&(r=k(p[2]),v(w()))}else{if(/^\s*(?:%.*)?$/.test(c[m]))continue;t=l(c[m]),t?v(t):i===e&&v(w()),q=n(c[m],r,s),q&&q.length&&("stems"in i||(i.stems=[]),i.stems.push.apply(i.stems,q))}var x=["unitnote","unitbeat","tempo"];if(e.voice){u=[];for(m in e.voice)if(e.voice[m].stems&&e.voice[m].stems.length)for(h(e.voice[m].stems),o=0;o<x.length;++o)!(x[o]in e)&&x[o]in e.voice[m]&&(e[x[o]]=e.voice[m][x[o]]);else u.push(m);for(m=0;m<u.length;++m)delete e.voice[u[m]]}return e}function d(a,b){var c=/^C/.test(a)?1:E(a);c&&(b.unitnote||(c<.75?b.unitnote=1/16:b.unitnote=1/8))}function f(a,b){var c=E(a);c&&(b.unitnote=c)}function g(a,b){var d,c=a.split(/\s+|=/),e=null,f=null;for(d=0;d<c.length;++d)c[d].indexOf("/")>=0||/^[1-4]$/.test(c[d])?e=e||E(c[d]):f=f||Number(c[d]);e&&(b.unitbeat=e),f&&(b.tempo=f)}function h(a){var c,d,e,f,g,b={};for(d=0;d<a.length;++d){for(c={},e=0;e<a[d].notes.length;++e)g=f=a[d].notes[e],b.hasOwnProperty(f.pitch)&&(g=b[f.pitch],g.time+=f.time,f.holdover=!0),f.tie&&(c[f.pitch]=g);b=c}}function i(a){var d,b="FCGDAEB",c={};if(!a)return c;if(a>0)for(d=0;d<a&&d<7;++d)c[b.charAt(d)]="^";else for(d=0;d>a&&d>-7;--d)c[b.charAt(6+d)]="_";return c}function k(a){if(!a)return{};var b,c={"c#":7,"f#":6,b:5,e:4,a:3,d:2,g:1,c:0,f:-1,bb:-2,eb:-3,ab:-4,db:-5,gb:-6,cb:-7,"a#m":7,"d#m":6,"g#m":5,"c#m":4,"f#m":3,bm:2,em:1,am:0,dm:-1,gm:-2,cm:-3,fm:-4,bbm:-5,ebm:-6,abm:-7,"g#mix":7,"c#mix":6,"f#mix":5,bmix:4,emix:3,amix:2,dmix:1,gmix:0,cmix:-1,fmix:-2,bbmix:-3,ebmix:-4,abmix:-5,dbmix:-6,gbmix:-7,"d#dor":7,"g#dor":6,"c#dor":5,"f#dor":4,bdor:3,edor:2,ador:1,ddor:0,gdor:-1,cdor:-2,fdor:-3,bbdor:-4,ebdor:-5,abdor:-6,dbdor:-7,"e#phr":7,"a#phr":6,"d#phr":5,"g#phr":4,"c#phr":3,"f#phr":2,bphr:1,ephr:0,aphr:-1,dphr:-2,gphr:-3,cphr:-4,fphr:-5,bbphr:-6,ebphr:-7,"f#lyd":7,blyd:6,elyd:5,alyd:4,dlyd:3,glyd:2,clyd:1,flyd:0,bblyd:-1,eblyd:-2,ablyd:-3,dblyd:-4,gblyd:-5,cblyd:-6,fblyd:-7,"b#loc":7,"e#loc":6,"a#loc":5,"d#loc":4,"g#loc":3,"c#loc":2,"f#loc":1,bloc:0,eloc:-1,aloc:-2,dloc:-3,gloc:-4,cloc:-5,floc:-6,bbloc:-7},d=a.replace(/\s+/g,"").toLowerCase().substr(0,5),e=d.match(/maj|min|mix|dor|phr|lyd|loc|m/);b=e?"maj"==e?d.substr(0,e.index):"min"==e?d.substr(0,e.index+1):d.substr(0,e.index+e[0].length):/^[a-g][#b]?/.exec(d)||"";var f=i(c[b]),g=a.substr(b.length).match(/(_+|=|\^+)[a-g]/gi);if(g)for(j=0;j<g.length;++j){var h=g[j].charAt(g[j].length-1).toUpperCase();"="==g[j].charAt(0)?delete f[h]:f[h]=g[j].substr(0,g[j].length-1)}return f}function l(a){var b=/^\[V:([^\]\s]*)\]/.exec(a);return b?b[1]:null}function n(a,b,c){var j,d=a.match(m),e=[],f=null,g=0,h=0,i=null;if(!d)return null;for(;g<d.length;)if(/^[\s%]/.test(d[g]))g++;else if(/^\[V:\S*\]$/.test(d[g]))g++;else if(/</.test(d[g]))h=-d[g++].length;else if(/>/.test(d[g]))h=d[g++].length;else if(/^\(\d+(?::\d+)*/.test(d[g]))i=r(d[g++]);else if(/^[!+].*[!+]$/.test(d[g]))s(d[g++],c);else if(/^.?".*"$/.test(d[g]))g++;else if(/^[()]$/.test(d[g]))"("==d[g++]?c.slurred+=1:(c.slurred-=1,c.slurred<=0&&(c.slurred=0,e.length>=1&&p(e[e.length-1],!1)));else if(/\|/.test(d[g])){for(j in c)1==j.length&&delete c[j];g++}else f=t(d,g,b,c),null!==f?(i&&(q(f.stem,i.time),i.count-=1,i.count||(i=null)),h&&e.length&&(j=h>0?(1-Math.pow(.5,h))*f.stem.time:(Math.pow(.5,-h)-1)*e[e.length-1].time,o(e[e.length-1],j),o(f.stem,-j)),h=0,c.slurred&&p(f.stem,!0),e.push(f.stem),g=f.index):g++;return e}function o(a,b){var c,d,e=a.time,f=e+b;for(a.time=f,c=0;c<a.notes.length;++c)d=a.notes[c],d.time==e&&(d.time=f)}function p(a,b){var c,d;for(c=0;c<a.notes.length;++c)d=a.notes[c],b?d.slurred=!0:d.slurred&&delete d.slurred}function q(a,b){var c;for(a.time*=b,c=0;c<a.notes.length;++c)a.notes[c].time*=b}function r(a){var b=/^\((\d+)(?::(\d+)(?::(\d+))?)?$/.exec(a);if(!b)return null;var c=Number(b[1]),d=Number(b[2])||2,e=Number(b[3])||c;return{time:d/c,count:e}}function s(a,b){if(!(a.length<2))switch(a=a.substring(1,a.length-1)){case"pppp":case"ppp":b.dynamics=.2;break;case"pp":b.dynamics=.4;break;case"p":b.dynamics=.6;break;case"mp":b.dynamics=.8;break;case"mf":b.dynamics=1;break;case"f":b.dynamics=1.2;break;case"ff":b.dynamics=1.4;break;case"fff":case"ffff":b.dynamics=1.5}}function t(a,b,c,d){var h,i,j,m,e=[],f="",g=!1,k=null,l=1/0;if(b<a.length&&"."==a[b]&&(g=!0,b++),b<a.length&&"["==a[b]){for(b++;b<a.length;)if(/^[\s%]/.test(a[b]))b++;else{if(/[A-Ga-g]/.test(a[b]))k={pitch:v(a[b++],c,d),tie:!1},k.frequency=D(k.pitch),e.push(k);else{if(!/[xzXZ]/.test(a[b])){if("."==a[b]){g=!0,b++;continue}break}k=null,b++}b<a.length&&/^(?![\s%!]).*[\d\/]/.test(a[b])?(h=a[b++],i=E(h)):(h="",i=1),k&&(k.duration=h,k.time=i),i&&i<l&&(f=h,l=i),b<a.length&&"-"==a[b]&&(k&&(e[e.length-1].tie=!0),b++)}if("]"!=a[b])return null;b++}else if(b<a.length&&/[A-Ga-g]/.test(a[b]))k={pitch:v(a[b++],c,d),tie:!1,duration:"",time:1},k.frequency=D(k.pitch),e.push(k);else{if(!(b<a.length&&/^[xzXZ]$/.test(a[b])))return null;b++}if(b<a.length&&/^(?![\s%!]).*[\d\/]/.test(a[b]))for(f=a[b++],i=E(f),m=0;m<e.length;++m)e[m].duration=f,e[m].time=i;if(b<a.length&&"-"==a[b])for(b++,m=0;m<e.length;++m)e[m].tie=!0;if(d.dynamics)for(j=d.dynamics,m=0;m<e.length;++m)e[m].velocity=j;return{index:b,stem:{notes:e,duration:f,staccato:g,time:E(f)}}}function u(a){return a.length>0&&"="==a.charAt(0)?a.substr(1):a}function v(a,b,c){var e,d=/^(\^+|_+|=|)([A-Ga-g])(.*)$/.exec(a);return d?(e=d[2].toUpperCase(),d[1].length>0?(c[e]=d[1],u(a)):u(c.hasOwnProperty(e)?c[e]+d[2]+d[3]:b.hasOwnProperty(e)?b[e]+d[2]+d[3]:a)):a}function w(a){return 440*Math.pow(2,(a-69)/12)}function A(a){return Math.round(69+12*Math.log(a/440)/Math.LN2)}function B(a){var b=/^(\^+|_+|=|)([A-Ga-g])([,']*)$/.exec(a);if(!b)return null;var c=b[3].replace(/,/g,"").length-b[3].replace(/'/g,"").length,d=x[b[2]]+y[b[1].charAt(0)]*b[1].length+12*c;return d+60}function C(a){var b=(a-72)%12;(a>60||0!=b)&&(b+=12);for(var c=Math.round((a-b-60)/12),d=z[b];0!=c;)d+=c>0?"'":",",c+=c>0?-1:1;return d}function D(a){return w(B(a))}function E(a){var c,d,f,b=/^(\d*)(?:\/(\d*))?$|^(\/+)$/.exec(a),e=0;if(b){if(b[3])return Math.pow(.5,b[3].length);if(d=b[2]?parseFloat(b[2]):/\//.test(a)?2:1,f=0,c=b[1]?parseFloat(b[1]):1,b[2])for(;f+1<b[1].length&&c>d;)f+=1,e=parseFloat(b[1].substring(0,f)),c=parseFloat(b[1].substring(f));return e+c/d}}function G(a,b){a||(a={}),"string"==typeof a&&(a={wave:a});var d,c={},e=b&&b.wavetable&&b.wavetable[a.wave];for(d in F)a.hasOwnProperty(d)?c[d]=a[d]:e&&e.defs&&e.defs.hasOwnProperty(d)?c[d]=e.defs[d]:c[d]=F[d];return c}function I(){if(null==c)for(var a=xc().ac,b=2*a.sampleRate,c=a.createBuffer(1,b,a.sampleRate),d=c.getChannelData(0),e=0;e<b;e++)d[e]=2*Math.random()-1;return c}function J(a,b,c){if("noise"==b){var d=a.ac.createBufferSource();return d.buffer=I(),d.loop=!0,d}var g,h,i,j,e=a.wavetable,f=a.ac.createOscillator();try{if(e.hasOwnProperty(b)){if(h=e[b].wave,e[b].freq){i=0;for(g in e[b].freq)j=Number(g),c>j&&j>i&&(i=j,h=e[b].freq[i])}!f.setPeriodicWave&&f.setWaveTable?f.setWaveTable(h):f.setPeriodicWave(h)}else f.type=b}catch(a){window.console&&window.console.log(a),f.type="square"}return f.frequency.value=c,f}a.dequeueTime=.5,a.bufferSecs=2,a.toneLength=1,a.cleanupDelay=.1,a.prototype.setTimbre=function(a){this._timbre=G(a,this._atop)},a.prototype.getTimbre=function(a){return G(this._timbre,this._atop)},a.prototype.setVolume=function(a){this._out&&(isNaN(a)||(this._out.gain.value=a))},a.prototype.getVolume=function(a){return this._out?this._out.gain.value:0},a.prototype.silence=function(){var a,b,c,d=1;this._queue.length=0,this._minQueueTime=1/0,this._maxScheduledTime=0,this._startSet.length=0,b=this._finishSet,this._finishSet={},c=this._callbackSet,this._callbackSet=[],this._out&&(this._out.disconnect(),d=this._out.gain.value),this._atop=xc(),this._out=this._atop.ac.createGain(),this._out.gain.value=d,this._out.connect(this._atop.out);for(a in b)this._trigger("noteoff",b[a]);for(a=0;a<c.length;++a)c[a].callback()},a.prototype.now=function(){return null!=this._now?this._now:(this._startPollTimer(!0),this._now)},a.prototype.on=function(a,b){this._handlers.hasOwnProperty(a)||(this._handlers[a]=[]),this._handlers[a].push(b)},a.prototype.off=function(a,b){if(this._handlers.hasOwnProperty(a))if(b){var c,d=this._handlers[a];for(c=0;c<d.length;++c)d[c]===b&&(d.splice(c,1),c-=1)}else this._handlers[a]=[]},a.prototype._trigger=function(a,b){var d,c=this._handlers[a];if(c){if(1==c.length)return void c[0](b);for(c=c.slice(),d=0;d<c.length;++d)c[d](b)}},a.prototype._makeSound=function(a){var l,m,n,o,b=a.timbre||this._timbre,c=a.time,d=c+a.duration,e=Math.min(d,c+b.attack),f=b.decay*Math.pow(440/a.frequency,b.decayfollow),g=e,h=d+b.release,i=b.detune&&1!=b.detune,j=b.gain*a.velocity*(i?.5:1),k=this._atop.ac;if(a.duration>0&&a.velocity>0){for(l=k.createGain(),l.gain.setValueAtTime(0,c),l.gain.linearRampToValueAtTime(j,e);g<e+1/32&&g+1/256<d;)g+=1/256,l.gain.linearRampToValueAtTime(j*(b.sustain+(1-b.sustain)*Math.exp((e-g)/f)),g);l.gain.setTargetAtTime(j*b.sustain,g,f),l.gain.setValueAtTime(j*(b.sustain+(1-b.sustain)*Math.exp((e-d)/f)),d),l.gain.linearRampToValueAtTime(0,h),l.connect(this._out),!b.cutoff&&!b.cutfollow||b.cutoff==1/0?m=l:(m=k.createBiquadFilter(),m.frequency.value=b.cutoff+a.frequency*b.cutfollow,m.Q.value=b.resonance,m.connect(l)),n=J(this._atop,b.wave,a.frequency),n.connect(m),n.start(c),n.stop(h),i&&(o=J(this._atop,b.wave,a.frequency*b.detune),o.connect(m),o.start(c),o.stop(h)),a.gainNode=l,a.oscillators=[n],i&&a.oscillators.push(o),a.cleanuptime=h}else a.duration=0;this._startSet.push(a)},a.prototype._truncateSound=function(b,c){if(c<b.time+b.duration&&(b.duration=Math.max(0,c-b.time),b.gainNode)){var l,d=b.timbre||this._timbre,e=b.time,f=Math.min(c,e+d.attack),g=d.decay*Math.pow(440/b.frequency,d.decayfollow),h=c+d.release,i=h+a.cleanupDelay,j=d.detune&&1!=d.detune,k=d.gain*b.velocity*(j?.5:1),m=b.gainNode;if(m.gain.cancelScheduledValues(c),c<=e?m.gain.setValueAtTime(0,c):c<=f?m.gain.linearRampToValueAtTime(k*(c-e)/(f-e)):m.gain.setValueAtTime(k*(d.sustain+(1-d.sustain)*Math.exp((f-c)/g)),c),m.gain.linearRampToValueAtTime(0,h),b.oscillators)for(l=0;l<b.oscillators.length;++l)b.oscillators[l].stop(h);b.cleanuptime=i}},a.prototype._doPoll=function(){if(this._pollTimer=null,this._now=null,e)return void this.silence();var d,f,g,h,i,j,k,l,b=this._atop.ac.currentTime+5e-4,c=[];if(this._minQueueTime-b<=a.bufferSecs){for(this._unsortedQueue&&(this._queue.sort(function(a,b){return a.time!=b.time?a.time-b.time:a.duration!=b.duration?a.duration-b.duration:a.frequency-b.frequency}),this._unsortedQueue=!1),d=0;d<this._queue.length&&!(this._queue[d].time-b>a.bufferSecs);++d);if(d>0){for(f=this._queue.splice(0,d),d=0;d<f.length;++d)this._makeSound(f[d]);this._minQueueTime=this._queue.length>0?this._queue[0].time:1/0}}for(d=0;d<this._cleanupSet.length;++d)i=this._cleanupSet[d],i.cleanuptime<b&&(i.gainNode&&(i.gainNode.disconnect(),i.gainNode=null),this._cleanupSet.splice(d,1),d-=1);for(h in this._finishSet)i=this._finishSet[h],g=i.time+i.duration,g<=b&&(c.push({order:[g,0],f:this._trigger,t:this,a:["noteoff",i]}),i.cleanuptime!=1/0&&this._cleanupSet.push(i),delete this._finishSet[h]);for(d=0;d<this._callbackSet.length;++d)l=this._callbackSet[d],g=l.time,g<=b&&(c.push({order:[g,1],f:l.callback,t:null,a:[]}),this._callbackSet.splice(d,1),d-=1);for(d=0;d<this._startSet.length;++d)this._startSet[d].time<=b&&(k=i=this._startSet[d],h=i.frequency,j=null,this._finishSet.hasOwnProperty(h)&&(j=this._finishSet[h],j.time<i.time||j.time==i.time&&j.duration<i.duration?(this._truncateSound(j,i.time),c.push({order:[i.time,0],f:this._trigger,t:this,a:["noteoff",j]}),delete this._finishSet[h]):(this._truncateSound(i,j.time),j=i)),this._startSet.splice(d,1),d-=1,i.duration>0&&i.velocity>0&&j!==i&&(this._finishSet[h]=i,c.push({order:[i.time,2],f:this._trigger,t:this,a:["noteon",i]})));for(this._startPollTimer(),c.sort(function(a,b){return a.order[0]!=b.order[0]?a.order[0]-b.order[0]:a.order[1]-b.order[1]}),d=0;d<c.length;++d)l=c[d],l.f.apply(l.t,l.a)},a.prototype._startPollTimer=function(b){if(!this._pollTimer||null==this._now){var f,g,c=this,d=function(){c._doPoll()},e=1/0;if(this._pollTimer&&(clearTimeout(this._pollTimer),this._pollTimer=null),b)return this._now=zc(),void(this._pollTimer=setTimeout(d,0));for(f=0;f<this._startSet.length;++f)e=Math.min(e,this._startSet[f].time);for(f in this._finishSet)e=Math.min(e,this._finishSet[f].time+this._finishSet[f].duration);for(f=0;f<this._callbackSet.length;++f)e=Math.min(e,this._callbackSet[f].time);this._cleanupSet.length>0&&(e=Math.min(e,this._cleanupSet[0].cleanuptime+1)),e=Math.min(e,this._minQueueTime-a.dequeueTime),g=Math.max(.001,e-this._atop.ac.currentTime),isNaN(g)||g==1/0||(this._pollTimer=setTimeout(d,Math.round(1e3*g)))}},a.prototype.tone=function(b,c,d,e,f,g){if(this._atop){"object"==typeof b&&(null==d&&(d=b.velocity),null==c&&(c=b.duration),null==e&&(e=b.delay),null==f&&(f=b.timbre),null==g&&(g=b.origin),b=b.pitch);var h,i;if(b||(b="C"),isNaN(b)?(h=B(b),i=w(h)):(i=Number(b),i<0?(h=-i,i=w(h)):h=A(i)),f||(f=this._timbre),f!==this._timbre){var k,j=f;f={};for(k in F)k in j?f[k]=j[k]:f[k]=defaulTimbre[k]}var m=(this._atop.ac,this.now()),n=m+(e||0),o={time:n,on:!1,frequency:i,midi:h,velocity:null==d?1:d,duration:null==c?a.toneLength:c,timbre:f,instrument:this,gainNode:null,oscillators:null,cleanuptime:1/0,origin:g};n<m+a.bufferSecs?this._makeSound(o):(!this._unsortedQueue&&this._queue.length&&n<this._queue[this._queue.length-1].time&&(this._unsortedQueue=!0),this._queue.push(o),this._minQueueTime=Math.min(this._minQueueTime,o.time))}},a.prototype.schedule=function(a,b){this._callbackSet.push({time:this.now()+a,callback:b})},a.prototype.play=function(a){var f,g,h,j,k,l,n,p,q,r,s,t,u,v,w,x,b=Array.prototype.slice.call(arguments),d=null,e={},m=0,y=[];if(b.length&&"function"==typeof b[b.length-1]&&(d=b.pop()),!this._atop)return void(d&&d());if(h=0,"object"==typeof b[0]){for(k in b[0])b[0].hasOwnProperty(k)&&(e[k]=b[0][k]);h=1,e.song&&b.push(e.song)}for(;h<b.length;++h)for(f=b[h].split(/\n(?=X:)/),k=0;k<f.length;++k)g=c(f[k]),g&&(!e.tempo&&g.tempo&&(e.tempo=g.tempo,g.unitbeat&&(e.tempo*=g.unitbeat/(g.unitnote||1))),g.voice&&y.push(g));for(e.tempo||(e.tempo=120),null==e.volume&&(e.volume=1),v=60/e.tempo,k=0;k<y.length;++k){g=y[k];for(r in g.voice)if(j=G(e.timbre||g.voice[r].timbre||g.timbre||this._timbre,this._atop),p=g.voice[r].stems){for(l=0,q=0;q<p.length;++q){for(t=p[q],n=1/Math.sqrt(t.notes.length),s=0;s<t.notes.length;++s)u=t.notes[s],u.holdover||(w=(u.time||t.time)*v,t.staccato?w=Math.min(Math.min(w,v/16),j.attack+j.decay):!u.slurred&&w>=1/8&&(w-=1/32),x=(u.velocity||1)*n*e.volume,this.tone(u.pitch,w,x,l,j,u));l+=t.time*v}m=Math.max(l,m)}}this._maxScheduledTime=Math.max(this._maxScheduledTime,this.now()+m),d&&this.schedule(m,d)};var b=/^([A-Za-z]):\s*(.*)$/,m=/(?:^\[V:[^\]\s]*\])|\s+|%[^\n]*|![^\s!:|\[\]]*!|\+[^+|!]*\+|[_<>@^]?"[^"]*"|\[|\]|>+|<+|(?:(?:\^+|_+|=|)[A-Ga-g](?:,+|'+|))|\(\d+(?::\d+){0,2}|\d*\/\d+|\d+\/?|\/+|[xzXZ]|\[?\|\]?|:?\|:?|::|./g,x={C:0,D:2,E:4,F:5,G:7,A:9,B:11,c:12,d:14,e:16,f:17,g:19,a:21,b:23},y={"^":1,"":0,"=":0,_:-1},z=["C","^C","D","_E","E","F","^F","G","_A","A","_B","B","c","^c","d","_e","e","f","^f","g","_a","a","_b","b"],F=a.defaultTimbre={wave:"square",gain:.1,attack:.002,decay:.4,decayfollow:0,sustain:0,release:.1,cutoff:0,cutfollow:0,resonance:0,detune:0};return a.pitchToMidi=function(a){return"string"==typeof a?B(a):a},a.midiToPitch=function(a){return"number"==typeof a?C(a):a},a}();a.extend(!0,a,{cssHooks:{turtlePenStyle:_a(),turtlePenDown:ab(),turtleSpeed:yb(),turtleEasing:zb(),turtleForward:Cb(),turtleTurningRadius:$a(),turtlePosition:Lb("turtlePosition","tx","ty",!0),turtlePositionX:Db("tx",parseFloat,"px",!0),turtlePositionY:Db("ty",parseFloat,"px",!0),
    turtleRotation:Db("rot",Gb,"deg",!0),turtleScale:Lb("turtleScale","sx","sy",!1),turtleScaleX:Db("sx",r,"",!1),turtleScaleY:Db("sy",r,"",!1),turtleTwist:Db("twi",Ga,"deg",!1),turtleHull:ya(),turtleTimbre:rc(),turtleVolume:sc()},cssNumber:{turtleRotation:!0,turtleSpeed:!0,turtleScale:!0,turtleScaleX:!0,turtleScaleY:!0,turtleTwist:!0},support:{turtle:!0}}),a.extend(!0,a.fx,{step:{turtlePosition:Jb("turtlePosition",!0),turtleRotation:Hb("turtleRotation"),turtleScale:Jb("turtleScale",!1),turtleTwist:Hb("turtleTwist")},speeds:{turtle:0}}),Gc.helptext=[];var ed={rt:Nc("rt",1,["<u>rt(degrees)</u> Right turn. Pivots clockwise by some degrees: <mark>rt 90</mark>","<u>rt(degrees, radius)</u> Right arc. Pivots with a turning radius: <mark>rt 90, 50</mark>"],Tc),lt:Nc("lt",1,["<u>lt(degrees)</u> Left turn. Pivots counterclockwise by some degrees: <mark>lt 90</mark>","<u>lt(degrees, radius)</u> Left arc. Pivots with a turning radius: <mark>lt 90, 50</mark>"],Tc),fd:Nc("fd",1,["<u>fd(pixels)</u> Forward. Moves ahead by some pixels: <mark>fd 100</mark>"],Uc),bk:Nc("bk",1,["<u>bk(pixels)</u> Back. Moves in reverse by some pixels: <mark>bk 100</mark>"],Uc),move:Nc("move",1,["<u>move(x, y)</u> Slides right x and forward y pixels without turning: <mark>move 50, 100</mark>"],Vc),movexy:Nc("movexy",1,["<u>movexy(x, y)</u> Changes graphing coordinates by x and y: <mark>movexy 50, 100</mark>"],Wc),moveto:Nc("moveto",1,["<u>moveto(x, y)</u> Move to graphing coordinates (see <u>getxy</u>): <mark>moveto 50, 100</mark>","<u>moveto(obj)</u> Move to page coordinates or an object on the page (see <u>pagexy</u>): <mark>moveto lastmousemove</mark>"],Xc),jump:Nc("jump",1,["<u>jump(x, y)</u> Move without drawing (compare to <u>move</u>): <mark>jump 0, 50</mark>"],Yc(Vc)),jumpxy:Nc("jumpxy",1,["<u>jumpxy(x, y)</u> Move without drawing (compare to <u>movexy</u>): <mark>jump 0, 50</mark>"],Yc(Wc)),jumpto:Nc("jumpto",1,["<u>jumpto(x, y)</u> Move without drawing (compare to <u>moveto</u>): <mark>jumpto 50, 100</mark>"],Yc(Xc)),turnto:Nc("turnto",1,["<u>turnto(degrees)</u> Turn to a direction. North is 0, East is 90: <mark>turnto 270</turnto>","<u>turnto(x, y)</u> Turn to graphing coordinates: <mark>turnto 50, 100</mark>","<u>turnto(obj)</u> Turn to page coordinates or an object on the page: <mark>turnto lastmousemove</mark>"],function(c,d,e){a.isNumeric(e)&&a.isNumeric(d)&&(d=[d,e],e=null);var f=ae;return this.plan(function(b,g){if(c.appear(b),a.isWindow(g)||9===g.nodeType)return void c.resolve(b);var i,j,k,h=null,l=null,m=null;if(a.isNumeric(d))j=Fa(d),k=ga(g),l={pageX:k.pageX+1024*Math.sin(j),pageY:k.pageY-1024*Math.cos(j)},h=e;else if(a.isArray(d))m=ea(g),m[0]-=d[0],m[1]-=d[1];else if(xb(d))l=d;else try{l=a(d).pagexy()}catch(a){return void c.resolve(b)}m||(m=ea(g,l)),dir=Ea(Math.atan2(-m[0],-m[1])),i=Ba(g,!0),null!==h&&(j=Fa(i.rot),dir=M(i.rot,dir,null===h?360:h)),dir=i.rot+Ga(dir-i.rot);var n=this.css("turtleTurningRadius");this.css({turtleTurningRadius:0}),this.animate({turtleRotation:dir},Ab(g,f),Bb(g)),this.plan(function(){this.css({turtleTurningRadius:n}),c.resolve(b)})}),this}),home:Nc("home",0,["<u>home()</u> Goes home. Jumps to the center without drawing: <mark>do home</mark>"],function(c,d){return this.plan(function(b,e){c.appear(b);var f=this.css("turtlePenDown"),g=this.css("turtleTurningRadius"),h=d||da(e);this.css({turtlePenDown:"up",turtleTurningRadius:0}),this.css({turtlePosition:ca(e,a(h).pagexy(),null,0,0),turtleRotation:0,turtleScale:1}),this.css({turtlePenDown:f,turtleTurningRadius:g}),c.resolve(b)}),this}),pen:Nc("pen",1,["<u>pen(color, size)</u> Selects a pen. Chooses a color and/or size for the pen: <mark>pen red</mark>; <mark>pen 0</mark>; <mark>pen erase</mark>; <mark>pen blue, 5</mark>.","<u>pen(on-or-off)</u> Turns the pen on or off: <mark>pen off</mark>; <mark>pen on</mark>."],function(d,e,f){var g=te(arguments,1,{lineCap:/^(?:butt|square|round)$/,lineJoin:/^(?:bevel|round|miter)$/,lineWidth:a.isNumeric,penStyle:"*"});e=g.penStyle,e&&"function"==typeof e&&(e.helpname||e.name)&&(e=e.helpname||e.name),0===g.lineWidth||null===e?e="none":e===b?e="black":a.isPlainObject(e)&&(e=Va(e));var h=ae;return this.plan(function(a,b){d.appear(a);var c=!V(b)&&!Hc(this),f=c&&Ua(this.css("turtlePenStyle")),i=f&&"down"==this.css("turtlePenDown"),j=!1;if(e===!1||e===!0||"down"==e||"up"==e?(this.css("turtlePenDown",e),j=!0):(g.lineWidth&&(e+=";lineWidth:"+g.lineWidth),g.lineCap&&(e+=";lineCap:"+g.lineCap),g.lineJoin&&(e+=";lineJoin:"+g.lineJoin),this.css("turtlePenStyle",e),this.css("turtlePenDown","none"==e?"up":"down")),c){var k=Ua(this.css("turtlePenStyle")),l=k&&(k.strokeStyle||k.savePath&&"gray")||f&&f.strokeStyle||"gray",m={},n=k&&"down"==this.css("turtlePenDown"),o=new bc(l+" pencil",this.parent()),p=this.height();o.css({zIndex:1,turtlePosition:ca(o.get(0),this.pagexy(),null,0,0),turtleRotation:this.css("turtleRotation"),turtleSpeed:1/0}),i?n||(m.turtleForward="+="+p,m.opacity=0):(o.css({turtleForward:"+="+p,opacity:0}),n&&(m.turtleForward="-="+p,m.opacity=1)),f&&!k&&"down"==i?(m.turtleForward="+="+p,m.opacity=0):f==k||f&&k&&f.strokeStyle==k.strokeStyle||(o.css({opacity:0}),m.opacity=1),o.animate(m,Ab(b,h)),this.queue(function(a){o.done(function(){o.remove(),a()})})}this.plan(function(){d.resolve(a)})}),this}),fill:Nc("fill",0,["<u>fill(color)</u> Fills a path traced using <u>pen path</u>: <mark>pen path; rt 100, 90; fill blue</mark>"],function(c,d){d?a.isPlainObject(d)&&(d=Va(d)):d="none";var e=Ua(d,"fillStyle");return this.plan(function(a,b){c.appear(a),nb(b,e),c.resolve(a)}),this}),dot:Nc("dot",0,["<u>dot(color, diameter)</u> Draws a dot. Color and diameter are optional: <mark>dot blue</mark>"],Zc($c)),box:Nc("box",0,["<u>box(color, size)</u> Draws a box. Color and size are optional: <mark>dot blue</mark>"],Zc(_c)),arrow:Nc("arrow",0,["<u>arrow(color, size)</u> Draws an arrow. <mark>arrow red, 100</mark>"],Zc(ad)),mirror:Nc("mirror",1,["<u>mirror(flipped)</u> Mirrors the turtle across its main axis, or unmirrors if flipped if false. <mark>mirror(true)</mark>"],function(c,d){return this.plan(function(b,e){c.appear(b);var f=a.map(a.css(e,"turtleScale").split(" "),parseFloat);1===f.length&&f.push(f[0]),f[0]*f[1]<0==!d&&(f[0]=-f[0],this.css("turtleScale",f.join(" "))),c.resolve(b)}),this}),twist:Nc("twist",1,["<u>twist(degrees)</u> Set the primary direction of the turtle. Allows use of images that face a different direction than 'up': <mark>twist(-90)</mark>"],function(c,d){return this.plan(function(b,e){c.appear(b),a.isWindow(e)||9===e.nodeType||(this.css("turtleTwist",d),c.resolve(b))}),this}),scale:Nc("scale",1,["<u>scale(factor)</u> Scales all motion up or down by a factor. To double all drawing: <mark>scale(2)</mark>"],function(d,e,f){f===b&&(f=e),e&&f||(e=f=1);var g=ae;return this.plan(function(b,c){if(d.appear(b),a.isWindow(c)||9===c.nodeType)return void d.resolve(b);var h=a.map(a.css(c,"turtleScale").split(" "),parseFloat);1===h.length&&h.push(h[0]),h[0]*=e,h[1]*=f,this.animate({turtleScale:a.map(h,Ca).join(" ")},Ab(c,g),Bb(c),d.resolver(b))}),this}),pause:Nc("pause",1,["<u>pause(seconds)</u> Pauses some seconds before proceeding. <mark>fd 100; pause 2.5; bk 100</mark>","<u>pause(turtle)</u> Waits for other turtles to be done before proceeding. <mark>t = new Turtle().fd 100; pause t; bk 100</mark>"],function(c,d){var f=null,g=null;return d&&a.isFunction(d.done)?(f=d,g=d.done):a.isFunction(d)&&(g=d),g?this.queue(function(){var b=this;g.call(f,function(){var c=b;b=null,c&&a.dequeue(c)})}):this.plan(function(a,b){c.appear(a),Jc(b,d),this.plan(c.resolver(a))}),this}),st:Nc("st",0,["<u>st()</u> Show turtle. The reverse of <u>ht()</u>. <mark>do st</mark>"],function(b){return this.plan(function(a){b.appear(a),this.show(),b.resolve(a)}),this}),ht:Nc("ht",0,["<u>ht()</u> Hide turtle. The turtle can be shown again with <u>st()</u>. <mark>do ht</mark>"],function(b){return this.plan(function(a){b.appear(a),this.hide(),b.resolve(a)}),this}),pu:function(){return this.pen(!1,Lc(arguments,0))},pd:function(){return this.pen(!0,Lc(arguments,0))},pe:function(){return this.pen("erase",Lc(arguments,0))},pf:function(){return this.pen("path",Lc(arguments,0))},clip:Nc("clip",1,["<u>Clips tranparent bits out of the image of the sprite, and sets the hit region."],function(c,d){return null==d&&(d=.125),this.plan(function(b,e){if(c.appear(b),"CANVAS"==e.tagName){var f=Of(e,d),g=a(e),h=I(e);Qf(e,f),Rf(f,parseFloat(g.css("width"))/e.width,parseFloat(g.css("height"))/e.height,-h[0],-h[1]),g.css("turtleHull",f)}c.resolve(b)})}),say:Nc("say",1,['<u>say(words)</u> Say something. Use English words.<mark>say "Let\'s go!"</mark>'],function(b,c){return this.plan(function(a,d){b.appear(a),this.queue(function(d){var e=!1,f=null,g=function(){e||(clearInterval(f),e=!0,b.resolve(a),d())};try{var h=new SpeechSynthesisUtterance(c);h.addEventListener("end",g),h.addEventListener("error",g),speechSynthesis.speak(h),f=setInterval(function(){speechSynthesis.pending||speechSynthesis.speaking||g()},250)}catch(a){console.log(a),g()}})}),this}),play:Nc("play",1,['<u>play(notes)</u> Play notes. Notes are specified in <a href="http://abcnotation.com/" target="_blank">ABC notation</a>.  <mark>play "de[dBFA]2[cGEC]4"</mark>'],function(c,d){return this.plan(function(b,d){c.appear(b),this.queue(function(e){var f=tc(d),g=a.makeArray(c.args),h=!0,i=function(){c.resolve(b),e()};g.length>0&&a.isPlainObject(g[0])&&g[0].hasOwnProperty("wait")&&(h=g[0].wait),h&&g.push(i),f.play.apply(f,g),h||i()})}),this}),tone:Sc("tone",["<u>tone(freq)</u> Immediately sound a tone. <u>tone(freq, 0)</u> Stop sounding the tone. <u>tone(freq, v, secs)</u> Play a tone with a volume and duration. Frequency may be a number in Hz or a letter pitch. <mark>tone 440, 5</mark>"],function(b,c){var d=arguments;return this.each(function(a,b){var c=tc(b);c.tone.apply(c,d)})}),silence:Sc("silence",["<u>silence()</u> immediately silences sound from play() or tone()."],function(){return this.each(function(a,b){var c=tc(b);c.silence()})}),speed:Nc("speed",1,["<u>speed(persec)</u> Set one turtle's speed in moves per second: <mark>turtle.speed 60</mark>"],function(b,c){return this.plan(function(a,d){b.appear(a),this.css("turtleSpeed",c),this.plan(function(){b.resolve(a)})}),this}),wear:Nc("wear",1,["<u>wear(color)</u> Sets the turtle shell color: <mark>wear turquoise</mark>","<u>wear(url)</u> Sets the turtle image url: <mark>wear 'http://bit.ly/1bgrQ0p'</mark>"],function(c,d,e){if(("object"==typeof d||"number"==typeof d)&&"string"==typeof e){var f=e;e=d,d=f}"number"==typeof e&&(e={height:e});var g=Rd(d,"turtle"),h=ae;return g?(e&&a.extend(g.css,e),this.plan(function(a,b){c.appear(a),this.css({backgroundImage:"none"});var d=!1,e=null;sb(this,g,function(){d=!0;var a=e;a&&(e=null,a())}),Hc(this)||this.delay(Ab(b,h)),d||this.pause({done:function(a){d?a():e=a}}),this.plan(function(){c.resolve(a)})}),this):this}),saveimg:Nc("saveimg",1,["<u>saveimg(filename)</u> Saves the turtle's image as a file. <mark>t.saveimg 'mypicture.png'</mark>"],function(b,c){return this.plan(function(a,d){b.appear(a);var e=!1;c||(c="img");var f=this.canvas();if(f){var g=f.toDataURL(),h=/^data:image\/(\w+);base64,(.*)$/i.exec(g);h?(h[1]&&c.toLowerCase().lastIndexOf("."+h[1].toLowerCase())!=Math.max(0,c.length-h[1].length-1)&&(c+="."+h[1]),e=!0,td.save(c,atob(h[2]),function(){b.resolve(a)})):Ee.html('<span style="color:red">Cannot saveimg: canvas toDataURL did not work as expected.</span>')}else Ee.html('<span style="color:red">Cannot saveimg: not a canvas</span>');e||b.resolve(a)})}),drawon:Nc("drawon",1,["<u>drawon(canvas)</u> Switches to drawing on the specified canvas. <mark>A = new Sprite('100x100'); drawon A; pen red; fd 50; done -> A.rt 360</mark>"],function(c,d){return this.each(function(){var a=Ya(this);a.drawOnCanvasSync&&Dc(this,a.drawOnCanvasSync),a.drawOnCanvasSync=d}),Dc(d,this),this.plan(function(b,e){c.appear(b);var f=Ya(e);f.drawOnCanvas&&Dc(e,f.drawOnCanvas),d&&d!==window?d.jquery&&a.isFunction(d.canvas)?f.drawOnCanvas=d.canvas():d.tagName&&"CANVAS"==d.tagName?f.drawOnCanvas=d:1!=d.nodeType&&9!=d.nodeType||(f.drawOnCanvas=a(d).canvas()):f.drawOnCanvas=null,c.resolve(b)})}),label:Nc("label",1,["<u>label(text)</u> Labels the current position with HTML: <mark>label 'remember'</mark>","<u>label(text, styles, labelsite)</u> Optional position specifies 'top', 'bottom', 'left', 'right', and optional styles is a size or CSS object: <mark>label 'big', { color: red, fontSize: 100 }, 'bottom'</mark>"],function(c,d,e,f){if((!f||"string"==typeof f)&&(a.isNumeric(e)||a.isPlainObject(e))){var g=f;f=e,e=g}a.isNumeric(f)&&(f={fontSize:f}),null==e&&(e=f&&"labelSide"in f?f.labelSide:f&&"label-side"in f?f["label-side"]:e="rotated scaled");var h=ae;return this.plan(function(b,g){c.appear(b);for(var i={padding:8},j=this.prop("style"),b=0;b<j.length;++b){var k=j[b];/^(?:width|height|opacity|background-image|background-size)$/.test(k)||/transform/.test(k)||(i[a.camelCase(k)]=j[k])}a.extend(i,{position:"absolute",display:"table",top:0,left:0},f);var l=me(d,"label").result.css(i).addClass("turtlelabel").appendTo(Ja());f&&"id"in f&&l.attr("id",f.id),f&&"class"in f&&l.addClass(f.class);var m=/\brotated\b/.test(e),n=/\bscaled\b/.test(e);l.css({turtlePosition:ca(l.get(0),this.pagexy(),null,0,0),turtleRotation:m?this.css("turtleRotation"):0,turtleScale:n?this.css("turtleScale"):1});var o=l.get(0).getBoundingClientRect();/\b(?:top|bottom)\b/.test(e)&&(i.top=(/\btop\b/.test(e)?-1:1)*o.height/2),/\b(?:left|right)\b/.test(e)&&(i.left=(/\bleft\b/.test(e)?-1:1)*o.width/2),l.css(i),Hc(this)||this.delay(Ab(g,h)),this.plan(function(){c.resolve(b)})})}),reload:Nc("reload",0,["<u>reload()</u> Does a reload, recycling content (cycling animated gifs)."],function(c){return this.plan(function(b,d){if(c.appear(b),a.isWindow(d)||9===d.nodeType)return window.location.reload(),void c.resolve(b);if(d.src){var e=d.src;d.src="",d.src=e}c.resolve(b)}),this}),hatch:function(c,d){if(this.length){d!==b||a.isNumeric(c)||(d=c,c=1);var e=this[0];if(a.isWindow(e)||9===e.nodeType?e=Ja():/^(?:br|img|input|hr|canvas)$/i.test(e.tagName)&&(e=e.parentElement),1===c)return Ud("function"==typeof d?d(0):d,e,"turtle");for(var f=0,g=[];f<c;++f)g.push(Ud("function"==typeof d?d(f):d,e,"turtle")[0]);return a(g)}},pagexy:Oc("pagexy",["<u>pagexy()</u> Page coordinates {pageX:, pageY}, top-left based: <mark>c = pagexy(); fd 500; moveto c</mark>"],function(){if(this.length){var b=ga(this[0]);return{pageX:b.pageX,pageY:b.pageY}}}),getxy:Oc("getxy",["<u>getxy()</u> Graphing coordinates [x, y], center-based: <mark>v = getxy(); move -v[0], -v[1]</mark>"],function(){if(this.length)return ea(this[0])}),direction:Oc("direction",["<u>direction()</u> Current turtle direction. North is 0; East is 90: <mark>direction()</mark>","<u>direction(obj)</u> <u>direction(x, y)</u> Returns the direction from the turtle towards an object or coordinate. Also see <u>turnto</u>: <mark>direction lastclick</mark>"],function(d,e){if(this.length){var i,f=this[0],g=d;if(g!==b){if(i=a(f).pagexy(),a.isNumeric(e)&&a.isNumeric(d)&&(g=[d,e]),a.isArray(g)&&(g=fa(f,[g])[0]),!xb(g))try{g=a(g).pagexy()}catch(a){}return g?Ea(Math.atan2(g.pageX-i.pageX,i.pageY-g.pageY)):NaN}return a.isWindow(f)||9===f.nodeType?0:ja(f)}}),distance:Oc("distance",["<u>distance(obj)</u> Returns the distance from the turtle to another object: <mark>distance lastclick</mark>","<u>distance(x, y)</u> Returns the distance from the turtle to graphing coorindates: <mark>distance(100, 0)</mark>"],function(c,d){if(this.length){var f,g,e=this[0],h=a(e).pagexy();if(a.isNumeric(d)&&a.isNumeric(c)&&(c=[c,d]),a.isArray(c)&&(c=fa(e,[c])[0]),!xb(c))try{c=a(c).pagexy()}catch(a){}return c?(f=c.pageX-h.pageX,g=c.pageY-h.pageY,Math.sqrt(f*f+g*g)):NaN}}),canvas:Sc("canvas",["<u>turtle.canvas()</u> The canvas for the turtle image. Draw on the turtle: <mark>c = turtle.canvas().getContext('2d'); c.fillStyle = red; c.fillRect(10, 10, 30, 30)</mark>"],function(){return this.filter("canvas").get(0)||this.find("canvas").get(0)}),imagedata:Sc("imagedata",["<u>imagedata()</u> Returns the image data for the turtle. <mark>imdat = imagedata(); write imdat.data.length, 'bytes'</mark>","<u>imagedata(imdat)</u> Sets the image data for the turtle. <mark>imagedata({width: 1, height:1, data:[255,0,0,255]});</mark>"],function(c){var d=this.canvas();if(!d){if(c)throw new Error("can only set imagedata on a canvas like a Sprite");var e=this.filter("img").get(0);if(!e)return;d=Qa(e.naturalWidth,e.naturalHeight),d.getContext("2d").drawImage(e,0,0)}var f=d.getContext("2d");if(!c)return f.getImageData(0,0,d.width,d.height);if(!(c instanceof ImageData)){if("object"!=typeof c||!a.isNumeric(c.width)||!a.isNumeric(c.height)||!(a.isArray(c.data)||c.data instanceof Uint8ClampedArray||c.data instanceof Unit8Array))return;for(var g=f.createImageData(Math.round(c.width),Math.round(c.height)),h=Math.min(c.data.length,g.data.length),i=0;i<h;++i)g.data[i]=c.data[i];c=g}if(c.width!=d.width||c.height!=d.height){var j=I(d);d.width=c.width,d.height=c.height;var k=I(d);Zb(d,j,k),a(d).css("turtleHull","auto"),f=d.getContext("2d")}f.putImageData(c,0,0)}),cell:Sc("cell",["<u>cell(r, c)</u> Row r and column c in a table. Use together with the table function: <mark>g = table 8, 8; g.cell(0,2).text 'hello'</mark>"],function(c,d){var e=this.find(a.isNumeric(c)?"tr:nth-of-type("+(c+1)+")":"tr");return e.find(a.isNumeric(d)?"td:nth-of-type("+(d+1)+")":"td")}),shown:Oc("shown",["<u>shown()</u> True if turtle is shown, false if hidden: <mark>do ht; write shown()</mark>"],function(){var b=this.get(0);return b&&!V(b)}),hidden:Oc("hidden",["<u>hidden()</u> True if turtle is hidden: <mark>do ht; write hidden()</mark>"],function(){var b=this.get(0);return!b||V(b)}),inside:Oc("inside",["<u>inside(obj)</u> True if the turtle is encircled by obj: <mark>inside(window)</mark>"],function(c){if(!c)return!1;if("string"==typeof c&&(c=a(c)),c.jquery){if(!c.length||V(c[0]))return!1;c=c[0]}for(var j,d=X(c),e=null,f=!1,g=!0,h=0;g&&h<this.length;++h){if(j=this[h],$(d,X(j)))return!1;e||(e=ia(c),f=aa(e,d)),f&&_(d,X(j))||(g&=xb(j)?na(j,e):ta(e,ia(j)))}return!!g}),touches:Oc("touches",["<u>touches(obj)</u> True if the turtle touches obj: <mark>touches(lastclick)</mark>","<u>touches(color)</u> True if the turtle touches a drawn color: <mark>touches red</mark>"],function(c,d){if(!this.length||V(this[0]))return!1;if("function"==typeof c&&Ed(c.helpname)&&(c=c.helpname),"color"==c||Ed(c))return rb(this[0],"color"==c?null:c);if(a.isNumeric(c)&&a.isNumeric(d)&&(c=[c,d]),a.isArray(c)&&2==c.length&&a.isNumeric(c[0])&&a.isNumeric(c[1])&&(c=fa(this[0]||document.body,[c])[0]),!c)return!1;"string"==typeof c&&(c=a(c)),c.jquery||a.isArray(c)||(c=[c]);for(var g,h,i,j,k,l,e=!1,f=0;!e&&f<this.length;++f)if(i=this[f],j=X(i),0!=j.width)for(k=null,g=0;!e&&g<c.length;++g)h=c[g],l=X(h),$(j,l)||(0!=l.width||null!=h.pageX&&null!=h.pageY)&&(k||(k=ia(i)),e|=xb(h)?na(h,k):sa(k,ia(h)));return!!e}),within:Oc("within",["<u>within(distance, obj)</u> Filters elements to those within distance of obj: <mark>$('.turtle').within(100, lastclick)</mark>"],function(b,c,d){return $b(this,!0,b,c,d)}),notwithin:Oc("notwithin",["<u>within(distance, obj)</u> Filters elements to those further than distance of obj: <mark>$('.turtle').notwithin(100, lastclick)</mark>"],function(b,c,d){return $b(this,!1,b,c,d)}),nearest:Oc("nearest",["<u>nearest(obj)</u> Filters elements to those nearest obj<mark>$('.turtle').neareest(lastclick)</mark>"],function(c,d){var e,h,i,f=[],g=1/0;if(e=a.isNumeric(e)&&a.isNumeric(d)?[c,d]:c,a.isArray(e)&&(e=fa(this[0]||document.body,[e])[0]),!xb(e))try{e=a(e).pagexy()}catch(a){e=null}for(i=0;i<this.length;i++)if(h=X(this[i]),!f.length||!Y(e,g,h)){var j=ga(this[i]),k=e.pageX-j.pageX,l=e.pageY-j.pageY,m=k*k+l*l;m<=g&&(m<g&&(g=m,f.length=0),f.push(this[i]))}return a(f)}),done:Sc("done",["<u>done(fn)</u> Calls fn when animation is complete. Use with await: <mark>await done defer()</mark>"],function(b){var c=this;return this.promise().done(function(){if(c){var a=c;f+=1,setTimeout(function(){f-=1,a.promise().done(b)},0)}else b.apply(this,arguments)})}),plan:Sc("plan",["<u>plan(fn)</u> Runs fn in the animation queue. For planning logic: <mark>write getxy(); fd 50; plan -> write getxy(); bk 50"],function(c,d,e){function f(b,f,g){var h=e?function(){d.apply(a(b),e)}:function(){d.call(a(b),f,b)},k=(g.length&&g[g.length-1],function(){var d=a.queue(this,c),e=[];"inprogress"===d[0]&&e.unshift(d.shift()),a.queue(b,c,e),h(),Array.prototype.push.apply(a.queue(b,c),d),i(b,c)});k.finish=h,a.queue(b,c,k)}a.isFunction(c)&&(e=d,d=c,c="fx");for(var g,j=this.length,k=0;k<j;++k){g=this[k],fd(g,c);var l=a.queue(g,c);l.length?f(g,k,l):e?d.apply(a(g),e):d.call(a(g),k,g)}return this})},gd={},hd=0,id=null,jd=null;md(ed,"slide","move"),md(ed,"direct","plan"),md(ed,"enclosedby","inside"),md(ed,"bearing","direction"),a.fn.extend(ed);var nd="data:image/gif;base64,R0lGODlhKAAwAPIFAAAAAAFsOACSRTCuSICAgP///wAAAAAAACH5BAlkAAYAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAKAAwAAAD72i6zATEgBCAebHpzUnxhDAMAvhxKOoV3ziuZyo3RO26dTbvgXj/gsCO9ysOhENZz+gKJmcUkmA6PSKfSqrWieVtuU+KGNXbXofLEZgR/VHCgdua4isGz9mbmM6U7/94BmlyfUZ1fhqDhYuGgYqMkCOBgo+RfWsNlZZ3ewIpcZaIYaF6XaCkR6aokqqrk0qrqVinpK+fsbZkuK2ouRy0ob4bwJbCibthh6GYebGcY7/EsWqTbdNG1dd9jnXPyk2d38y0Z9Yub2yA6AvWPYk+zEnkv6xdCoPuw/X2gLqy9vJIGAN4b8pAgpQOIlzI8EkCACH5BAlkAAYALAAAAAAoADAAAAPuaLrMBMSAEIB5senNSfGEMAwC+HEo6hXfOK5nKjdE7bp1Nu+BeP+CwI73Kw6EQ1nP6AomZxSSYDo9Ip9KqtaJ5W25Xej3qqGYsdEfZbMcgZXtYpActzLMeLOP6c7f3nVNfEZ7TXSFg4lyZAYBio+LZYiQfHMbc3iTlG9ilGpdjp4ujESiI6RQpqegqkesqqhKrbEpoaa0KLaiuBy6nrxss6+3w7tomo+cDXmBnsoLza2nsb7SN2tl1nyozVOZTJhxysxnd9XYCrrAtT7KQaPruavBo2HQ8xrvffaN+GV5/JbE45fOG8Ek5Q4qXHgwAQA7",od={click:1,dblclick:1,mouseup:1,mousedown:1,mousemove:1},qd=null,rd=[],sd=!1,td={interrupt:Sc("interrupt",["<u>interrupt()</u> Interrupts and aborts all turtle commands."],function(c){if("reset"==c)return void(e=!1);if("test"==c)return!e&&(!!_d||(!!a.timers.length||(!!Wd.length||(!!f||(!!pd()||(!!a(":animated").length||(a(".turtle").filter(function(){return a.queue(this).length>0}).length>0||(a(".turtleinput").filter(function(){return!a(this).prop("disabled")}).length>0||!!Rc()))))))));a(":animated,.turtle").clearQueue().stop(),yc(),a(".turtleinput").prop("disabled",!0),a(window).off(".turtleevent"),a("*").not("#_testpanel *").map(function(b,c){a._data(c,"events",null)}),e=!0,be(null,null),Zd();for(var d=a.timers.length-1;d>=0;--d)a.timers[d].anim&&a.timers[d].anim.elem&&a(a.timers[d].anim.elem).stop(!0,!0);var g=c?"'"+c+"'":"";throw new Error("interrupt("+g+") called")}),cs:Pc("cs",["<u>cs()</u> Clear screen. Erases both graphics canvas and body text: <mark>do cs</mark>"],function(){ob()}),cg:Pc("cg",["<u>cg()</u> Clear graphics. Does not alter body text: <mark>do cg</mark>"],function(){ob("canvas labels")}),ct:Pc("ct",["<u>ct()</u> Clear text. Does not alter graphics canvas: <mark>do ct</mark>"],function(){ob("text")}),canvas:Sc("canvas",["<u>canvas()</u> Returns the raw turtle canvas. <mark>c = canvas().getContext('2d'); c.fillStyle = red; c.fillRect(100,100,200,200)</mark>"],function(){return Pa()}),sizexy:Sc("sizexy",["<u>sizexy()</u> Get the document pixel [width, height]. <mark>[w, h] = sizexy(); canvas('2d').fillRect(0, 0, w, h)</mark>"],Sa),forever:Sc("forever",["<u>forever(fn)</u> Calls fn repeatedly, forever. <mark>forever -> fd 2; rt 2</mark>","<u>forever(fps, fn)</u> Calls fn repeating fps per second. <mark>forever 2, -> fd 25; dot blue</mark>"],Yd),stop:Sc("stop",["<u>stop()</u> stops the current forever loop. <mark>forever -> fd 10; if not inside window then stop()</mark>","<u>stop(fn)</u> stops the forever loop corresponding to fn.","Use <u>break</u> to stop a <u>for</u> or <u>while</u> loop."],$d),tick:Sc("tick",["<u>tick(fps, fn)</u> Calls fn fps times per second until <u>tick</u> is called again: <mark>c = 10; tick 1, -> c and write(c--) or tick()</mark>"],function(c,d){if(pd()){var e=a(qd);e.plan(function(){be(c,d)})}else be(c,d)}),speed:Pc("speed",["<u>speed(mps)</u> Sets default turtle speed in moves per second: <mark>speed Infinity</mark>"],function(b){ce(b)}),play:Sc("play",['<u>play(notes)</u> Play notes. Notes are specified in <a href="http://abcnotation.com/" target="_blank">ABC notation</a>.  <mark>play "de[dBFA]2[cGEC]4"</mark>'],function(){if(qd){var c=a(qd);c.play.apply(c,arguments)}else{var d=Mc(null,"play",arguments,0);d.appear(null);var e=vc(),f=a.makeArray(d.args);f.push(function(){d.resolve(null)}),e.play.apply(e,f),d.exit()}}),tone:Sc("tone",["<u>tone(freq)</u> Immediately sound a tone. <u>tone(freq, 0)</u> Stop sounding the tone. <u>tone(freq, v, secs)</u> Play a tone with a volume and duration. Frequency may be a number in Hz or a letter pitch. <mark>tone 440, 5</mark>"],function(){if(qd){var c=a(qd);c.tone.apply(c,arguments)}else{var d=vc();d.play.apply(d,args)}}),silence:Sc("silence",["<u>silence()</u> Immediately silences sound from play() or tone()."],function(){if(qd){var c=a(qd);c.silence()}else{var d=vc();d.silence()}}),sync:Sc("sync",["<u>sync(t1, t2, t3,...)</u> Selected turtles wait for each other to stop."],Dc),remove:Sc("remove",["<u>remove(t)</u> Remove selected turtles."],Ec),done:Sc("done",["<u>done(fn)</u> Calls fn when animation is complete. Use with await: <mark>await done defer()</mark>"],function(c){var d=a(".turtle");return d.promise().done(function(){if(d){var a=d;f+=1,setTimeout(function(){f-=1,a.promise().done(c)},0)}else c.apply(this,arguments)})}),load:Sc("load",["<u>load(url, cb)</u> Loads data from the url and passes it to cb. <mark>load 'intro', (t) -> write 'intro contains', t</mark>"],function(b,c){var d;return a.ajax(Rb(b,"load"),{async:!!c,complete:function(b){try{d=JSON.parse(b.responseText),"string"==typeof d.data&&"string"==typeof d.file?d=d.data:a.isArray(d.list)&&"string"==typeof d.directory&&(d=d.list)}catch(a){null==d&&b&&b.responseText&&(d=b.responseText)}c&&c(d,b)}}),d}),save:Sc("save",["<u>save(url, data, cb)</u> Posts data to the url and calls when done. <mark>save 'intro', 'pen gold, 20\\nfd 100\\n'</mark>"],function(b,c,d){if(!b)throw new Error("Missing url for save");var f,e={},b=Rb(b,"save");if("string"==typeof c||"number"==typeof c)e.data=c;else for(f in c)c.hasOwnProperty(f)&&("string"==typeof c[f]?e[f]=c[f]:e[f]=JSON.stringify(c[f]));if(e&&!e.key){var g=Tb();g&&g.key&&g.user==Qb(b)&&(e.key=g.key)}a.ajax(Rb(b,"save"),{type:"POST",data:e,complete:function(a){var b;try{b=JSON.parse(a.responseText)}catch(c){null==b&&a&&a.responseText&&(b=a.responseText)}d&&d(b,a)}})}),append:Pc("append",["<u>append(html)</u> Appends text to the document without a new line. <mark>append 'try this twice...'</mark>"],function(c){a.fn.append.apply(a("body"),arguments)}),type:Pc("type",["<u>type(text)</u> Types preformatted text like a typewriter. <mark>type 'Hello!\n'</mark>"],ke),write:Pc("write",["<u>write(html)</u> Writes a line of text. Arbitrary HTML may be written: <mark>write 'Hello, world!'</mark>"],le,function(){return me(Array.prototype.join.call(arguments," "),"div")}),read:Pc("read",["<u>read(fn)</u> Reads text or numeric input. Calls fn once: <mark>read (x) -> write x</mark>","<u>read(html, fn)</u> Prompts for input: <mark>read 'Your name?', (v) -> write 'Hello ' + v</mark>"],le,function(b,c){return pe(b,c,0)}),readnum:Pc("readnum",["<u>readnum(html, fn)</u> Reads numeric input. Only numbers allowed: <mark>readnum 'Amount?', (v) -> write 'Tip: ' + (0.15 * v)</mark>"],le,function(b,c){return pe(b,c,1)}),readstr:Pc("readstr",["<u>readstr(html, fn)</u> Reads text input. Never converts input to a number: <mark>readstr 'Enter code', (v) -> write v.length + ' long'</mark>"],le,function(b,c){return pe(b,c,-1)}),menu:Pc("menu",["<u>menu(map)</u> shows a menu of choices and calls a function based on the user's choice: <mark>menu {A: (-> write 'chose A'), B: (-> write 'chose B')}</mark>"],le,ne),button:Pc("button",["<u>button(text, fn)</u> Writes a button. Calls fn whenever the button is clicked: <mark>button 'GO', -> fd 100</mark>"],le,oe),table:Pc("table",["<u>table(m, n)</u> Writes m rows and c columns. Access cells using <u>cell</u>: <mark>g = table 8, 8; g.cell(2,3).text 'hello'</mark>","<u>table(array)</u> Writes tabular data. Each nested array is a row: <mark>table [[1,2,3],[4,5,6]]</mark>"],le,re),img:Pc("img",["<u>img(url)</u> Writes an image with the given address. Any URL can be provided.  A name without slashes will be treated as '/img/name'.<mark>t = img 'tree'</mark>"],le,qe),random:Sc("random",["<u>random(n)</u> Random non-negative integer less than n: <mark>write random 10</mark>","<u>random(list)</u> Random member of the list: <mark>write random ['a', 'b', 'c']</mark>","<u>random('position')</u> Random page position: <mark>moveto random 'position'</mark>","<u>random('color')</u> Random color: <mark>pen random 'color'</mark>"],Vd),rgb:Sc("rgb",["<u>rgb(r,g,b)</u> Makes a color out of red, green, and blue parts. <mark>pen rgb(150,88,255)</mark>"],function(a,b,c){return se("rgb",[Math.max(0,Math.min(255,Math.floor(a))),Math.max(0,Math.min(255,Math.floor(b))),Math.max(0,Math.min(255,Math.floor(c)))])}),hatch:function(c,d){return a(document).hatch(c,d)},rgba:Sc("rgba",["<u>rgba(r,g,b,a)</u> Makes a color out of red, green, blue, and alpha. <mark>pen rgba(150,88,255,0.5)</mark>"],function(a,b,c,d){return se("rgba",[Math.max(0,Math.min(255,Math.floor(a))),Math.max(0,Math.min(255,Math.floor(b))),Math.max(0,Math.min(255,Math.floor(c))),d])}),hsl:Sc("hsl",["<u>hsl(h,s,l)</u> Makes a color out of hue, saturation, and lightness. <mark>pen hsl(120,0.65,0.75)</mark>"],function(a,b,c){return se("hsl",[a,(100*b).toFixed(0)+"%",(100*c).toFixed()+"%"])}),hsla:Sc("hsla",["<u>hsla(h,s,l,a)</u> Makes a color out of hue, saturation, lightness, alpha. <mark>pen hsla(120,0.65,0.75,0.5)</mark>"],function(a,b,c,d){return se("hsla",[a,(100*b).toFixed(0)+"%",(100*c).toFixed(0)+"%",d])}),click:Qc("click",["<u>click(fn)</u> Calls fn(event) whenever the mouse is clicked. <mark>click (e) -> moveto e; label 'clicked'</mark>"]),dblclick:Qc("dblclick",["<u>dblclick(fn)</u> Calls fn(event) whenever the mouse is double-clicked. <mark>dblclick (e) -> moveto e; label 'double'</mark>"]),mouseup:Qc("mouseup",["<u>mouseup(fn)</u> Calls fn(event) whenever the mouse is released. <mark>mouseup (e) -> moveto e; label 'up'</mark>"]),mousedown:Qc("mousedown",["<u>mousedown(fn)</u> Calls fn(event) whenever the mouse is pressed. <mark>mousedown (e) -> moveto e; label 'down'</mark>"]),mousemove:Qc("mousemove",["<u>mousemove(fn)</u> Calls fn(event) whenever the mouse is moved. <mark>mousemove (e) -> write 'at ', e.x, ',', e.y</mark>"]),keydown:Qc("keydown",["<u>keydown(fn)</u> Calls fn(event) whenever a key is pushed down. <mark>keydown (e) -> write 'down ' + e.key</mark>"]),keyup:Qc("keyup",["<u>keyup(fn)</u> Calls fn(event) whenever a key is released. <mark>keyup (e) -> write 'up ' + e.key</mark>"]),keypress:Qc("keypress",["<u>keypress(fn)</u> Calls fn(event) whenever a character key is pressed. <mark>keypress (e) -> write 'press ' + e.key</mark>"]),send:Sc("send",["<u>send(name)</u> Sends a message to be received by recv. <mark>send 'go'; recv 'go', -> fd 100</mark>"],function(b){var c=arguments,d=Array.prototype.slice.call(c,1),e=vd.sent[b];e||(e=vd.sent[b]=[]),e.push(d),wd(b)}),recv:Sc("recv",["<u>recv(name, fn)</u> Calls fn once when a sent message is received. <mark>recv 'go', (-> fd 100); send 'go'</mark>"],function(b,c){var d=vd.waiting[b];d||(d=vd.waiting[b]=[]),d.push(c),wd(b)}),abs:Sc("abs",["<u>abs(x)</u> The absolute value of x. <mark>see abs -5</mark>"],Math.abs),acos:Sc("acos",["<u>acos(degreees)</u> Trigonometric arccosine, in degrees. <mark>see acos 0.5</mark>"],function(b){return eb(180*Math.acos(b)/Math.PI)}),asin:Sc("asin",["<u>asin(degreees)</u> Trigonometric arcsine, in degrees. <mark>see asin 0.5</mark>"],function(b){return eb(180*Math.asin(b)/Math.PI)}),atan:Sc("atan",["<u>atan(degreees)</u> Trigonometric arctangent, in degrees. <mark>see atan 0.5</mark>"],function(b){
    return eb(180*Math.atan(b)/Math.PI)}),atan2:Sc("atan2",["<u>atan2(degreees)</u> Trigonometric two-argument arctangent, in degrees. <mark>see atan -1, 0</mark>"],function(b,c){return eb(180*Math.atan2(b,c)/Math.PI)}),cos:Sc("cos",["<u>cos(degreees)</u> Trigonometric cosine, in degrees. <mark>see cos 45</mark>"],function(b){return eb(Math.cos(b%360*Math.PI/180))}),sin:Sc("sin",["<u>sin(degreees)</u> Trigonometric sine, in degrees. <mark>see sin 45</mark>"],function(b){return eb(Math.sin(b%360*Math.PI/180))}),tan:Sc("tan",["<u>tan(degreees)</u> Trigonometric tangent, in degrees. <mark>see tan 45</mark>"],function(b){return eb(Math.tan(b%360*Math.PI/180))}),ceil:Sc("ceil",["<u>ceil(x)</u> Round up. <mark>see ceil 1.9</mark>"],Math.ceil),floor:Sc("floor",["<u>floor(x)</u> Round down. <mark>see floor 1.9</mark>"],Math.floor),round:Sc("round",["<u>round(x)</u> Round to the nearest integer. <mark>see round 1.9</mark>"],Math.round),exp:Sc("exp",["<u>exp(x)</u> Raise e to the power x. <mark>see exp 2</mark>"],Math.exp),ln:Sc("ln",["<u>ln(x)</u> The natural logarithm of x. <mark>see ln 2</mark>"],Math.log),log10:Sc("log10",["<u>log10(x)</u> The base 10 logarithm of x. <mark>see log10 0.01</mark>"],function(b){return eb(Math.log(b)*Math.LOG10E)}),pow:Sc("pow",["<u>pow(x, y)</u> Raise x to the power y. <mark>see pow 4, 1.5</mark>"],function(b,c){return eb(Math.pow(b,c))}),sqrt:Sc("sqrt",["<u>sqrt(x)</u> The square root of x. <mark>see sqrt 25</mark>"],Math.sqrt),max:Sc("max",["<u>max(x, y, ...)</u> The maximum of a set of values. <mark>see max -5, 2, 1</mark>"],Math.max),min:Sc("min",["<u>min(x, y, ...)</u> The minimum of a set of values. <mark>see min 2, -5, 1</mark>"],Math.min),Pencil:Sc("Pencil",["<u>new Pencil(canvas)</u> Make an invisble pencil for drawing on a canvas. <mark>s = new Sprite; p = new Pencil(s); p.pen red; p.fd 100; remove p</mark>"],ac),Turtle:Sc("Turtle",["<u>new Turtle(color)</u> Make a new turtle. <mark>t = new Turtle; t.fd 100</mark>"],bc),Piano:Sc("Piano",["<u>new Piano(keys)</u> Make a new piano. <mark>t = new Piano 88; t.play 'edcdeee'</mark>"],dc),Webcam:Sc("Webcam",["<u>new Webcam(options)</u> Make a new webcam. <mark>v = new Webcam; v.plan -> pic = new Sprite v</mark>"],cc),Sprite:Sc("Sprite",["<u>new Sprite({width:w,height:h,color:c})</u> Make a new sprite to <mark>drawon</mark>. <mark>s = new Sprite({width:50,height:50,color:blue}); s.fd 100</mark>"],_b),loadscript:Sc("loadscript",["<u>loadscript(url, callback)</u> Loads Javascript or Coffeescript from the given URL, calling callback when done."],function(c,d){window.CoffeeScript&&/\.(?:coffee|cs)$/.test(c)?CoffeeScript.load(c,d):a.getScript(c,d)}),pressed:Sc("pressed",["<u>pressed('control')</u> Tests if a specific key is pressed. <mark>if pressed 'a' then write 'a was pressed'</mark>","<u>pressed.list()</u> Returns a list of pressed keys, by name. <mark>write 'Pressed keys: ' + pressed.list().join(',')</mark>"],hc),help:Gc},ud={finish:{helptext:["<u>finish()</u> Finishes turtle animation. Does not pause for effect: <mark>do finish</mark>"]}},vd={sent:{},waiting:{},pollTimer:null};md(td,"defaultspeed","speed");var xd={},yd=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent"];!function(){for(var a=["none","erase","path","up","down","color","position","normal","touch"],b=a.concat(yd),c=0;c<b.length;c++)td.hasOwnProperty(b[c])||(td[b[c]]=b[c]);td.PI=Math.PI,td.E=Math.E,td.print=td.write,ud.colors={helptext:["Defined colors: "+yd.join(" ")]},ud.see={helptext:["<u>see(v)</u> Shows the value of v in the test panel: <mark>see document</mark>"]},ud.if=ud.else=ud.then={helptext:["<u>if</u> <u>then</u> <u>else</u> Tests a condition: <mark>if 1 <= (new Date).getDay() <= 5 then write 'Working hard!' else write 'Happy weekend!'</mark>"]},ud.await=ud.defer={helptext:['<u>await</u> <u>defer</u> Waits for results from an asynchronous event; from <a href="http://maxtaco.github.io/coffee-script/" target="_blank">Iced CoffeeScript</a>: <mark>await readnum defer n</mark>']}}(),a.turtle=function(d,e){var f=!1;if(arguments.length||(d="turtle"),1==arguments.length&&"object"==typeof d&&d&&!d.hasOwnProperty("length")&&(e=d,d="turtle"),e=e||{},"turtle"in e&&(d=e.turtle),Cd(),"htmlscript"in e&&!e.htmlscript||a('script[type="text/html"]').each(function(){a(this).replaceWith(a(this).html().replace(/^\x3c!\[CDATA\[\n?|\]\]\x3e$/g,""))}),!Ia.ctx&&"subpixel"in e&&(Ia.subpixel=parseInt(e.subpixel)),a.turtle.hangtime="hangtime"in e?parseFloat(e.hangtime):1e4,"events"in e&&!e.events||fe(e.eventprefix),"pressed"in e&&!e.pressed||(qc(),hc.enable(!0)),"see"in e&&!e.see||(Te(),f=!0,window.addEventListener?window.addEventListener("error",Ee):window.onerror=Ee,window.log=Ee),"functions"in e&&!e.functions||(window.printpage=window.print,a.extend(window,td)),ce("defaultspeed"in e?e.defaultspeed:1),wc())try{xc()}catch(a){}var g=null,h=!1;if(d&&(g=a("#"+d),g.length||(a("body").length||(document.write("<body>"),h=!0),g=new bc(d))),g&&!g.length&&(g=null),g&&1===g.length&&(!("global"in e)||e.global)){var i={css:1,fadeIn:1,fadeOut:1,fadeTo:1,fadeToggle:1,animate:1,toggle:1,finish:1,promise:1,direct:1},j=a.extend({},ed,i);rd.push.apply(rd,Bd(g,j)),qd=g[0],g.css({zIndex:1})}if("ids"in e&&!e.ids||(de(e.idprefix),g&&d&&(window[d]=g)),!("panel"in e)||e.panel){var k={title:"test panel (type help for help)",abbreviate:[b,xd],consolehook:zd};if(g&&k.abbreviate.push(g),e.title&&(k.title=e.title),e.panelheight&&(k.height=e.panelheight),Ee.init(k),f)return window.CoffeeScript?"see.init(eval(see.cs))":Ee.here}},a.extend(a.turtle,td);a.cleanData;a.cleanData=function(c){for(var e,d=0;(e=c[d])!==b;d++){var f=a.data(e,"turtleData");f&&f.stream&&f.stream.stop(),e.id&&window[e.id]&&window[e.id].jquery&&1===window[e.id].length&&window[e.id][0]===e&&delete window[e.id],e===qd&&Cd()}};var Fd={},Nd={turtle:function(a){return a||(a="mediumseagreen"),{url:Id(a),css:{width:20,height:24,transformOrigin:"10px 13px",turtleHull:"-8 -5 -8 6 -2 -13 2 -13 8 6 8 -5 0 9",opacity:.67,backgroundImage:"url("+nd+")",backgroundSize:"cover"}}},pointer:function(a){return a||(a="gray"),{url:Jd(a),css:{width:20,height:24,transformOrigin:"10px 18px",turtleHull:"-10 6 0 -18 10 6",opacity:.67}}},radius:function(a){return a||(a="gray"),{url:Kd(a),css:{width:20,height:20,transformOrigin:"10px 10px",turtleHull:"-10 0 -7 7 0 10 7 7 10 0 7 -7 0 -10 -7 -7",opacity:1}}},dot:function(a){return a||(a="black"),{url:Ld(a,24),css:{width:12,height:12,transformOrigin:"6px 6px",turtleHull:"-6 0 -4 4 0 6 4 4 6 0 4 -4 0 -6 -4 -4",opacity:1}}},point:function(a){return a||(a="black"),{url:Ld(a,6),css:{width:3,height:3,transformOrigin:"1.5px 1.5px",turtleHull:"-1.5 0 -1 1 0 1.5 1 1 1.5 0 1 -1 0 -1.5 -1 -1",opacity:1}}},pencil:function(a){return a||(a="dodgerblue"),{url:Md(a),css:{width:20,height:24,transformOrigin:"10px 24px",turtleHull:"0 0 -3 -6 -3 -24 3 -6 3 -24",opacity:1}}}},Sd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},Wd=[],Xd=[],_d=null,ae=0,ee=null,he={autoScrollTimer:null,bottomSeen:0},ue={init:function(){try{parent&&parent.ide&&(this.ide=parent.ide,this.ide.bindframe(window),this.attached=!0)}catch(a){this.ide=null,this.attached=!1}this.attached&&window.addEventListener&&window.addEventListener("error",function(a){ue.reportEvent("error",[a])})},attached:!1,ide:null,reportEvent:function(b,c){this.ide&&this.ide.reportEvent(b,c)},nextId:function(){return this.ide?this.ide.nextId():0}};ue.init(),function(){function c(a){return a.toFixed(1).replace(/\.0$/,"")}function d(a){return'<code style="font-weight:bold;color:blue">'+a+"</code>"}function e(b,c){return b&&(b=b.get(0))&&c&&c.target&&(b==c.target||a.contains(b,c.target))}if(ue.ide&&(!ue.ide.getOptions||ue.ide.getOptions().panel)){var m,n,o,p,b=a("<samp>").css({position:"fixed",zIndex:1e6-1,fontFamily:"sans-serif",display:"none",background:"#ff8",border:"1px solid dimgray",padding:"1px",cursor:"move",fontSize:12}).appendTo("body"),f=null,g=null,h=null,i=0,j=0,k=0,l=0;a(window).on("mousedown mouseup mousemove keydown",function(q){if("keydown"==q.type){if(q.which<27)return;g&&g.remove(),g=f=h=null}if("mousedown"==q.type)if(g)if(h)g&&g.remove(),g=f=h=null;else if(f)g.css({cursor:"default"}),h=q;else{a.turtle.interrupt("reset");var s=a(".turtle").within("touch",q);f=s.length?s.eq(0):q}else if(e(b,q)){var r=Sa();h=f=null,g=a('<canvas width="'+r[0]+'" height="'+r[1]+'">').css({position:"absolute",top:0,left:0,cursor:"crosshair",zIndex:1e6}).appendTo("body")}if(g){var x,y,z,A,B,C,D,t=g.canvas(),u=t.getContext("2d"),v=!1,w=h||q;if(f&&"function"==typeof f.pagexy){var E=f.getxy(),x=f.pagexy();x.x=E[0],x.y=E[1],v=!0,C=f.direction(),y=["getxy is "+c(x.x)+", "+c(x.y),"direction is "+c(C)]}else x=f||w,y=[d("moveto "+c(x.x)+", "+c(x.y))];if(y.unshift(h?'<span style="color:green">click to close</span>':f?'<span style="color:red">click to measure</span>':'<span style="color:red">click on point</span>'),z=w.x-x.x,A=w.y-x.y,B=Math.sqrt(z*z+A*A),D=Math.atan2(z,A)/Math.PI*180,f){if(u.save(),u.clearRect(i-10,j-10,k+10,l+10),i=k=x.pageX,j=l=x.pageY,u.fillStyle="red",u.beginPath(),u.arc(x.pageX,x.pageY,4,0,2*Math.PI,!1),u.closePath(),u.fill(),B>0){if(v){u.strokeStyle="black",u.fillStyle="black",o=(C-90)/180*Math.PI,p=(D-90)/180*Math.PI,m=x.pageX+100*Math.cos(o),n=x.pageY+100*Math.sin(o),dd(u,2,x.pageX,x.pageY,m,n),i=Math.min(m,i),j=Math.min(n,j),k=Math.max(m,k),l=Math.max(n,l);var F=(360+D-C)%360;u.beginPath(),F<=180?(y.push(d("rt "+c(F))),B>=20&&u.arc(x.pageX,x.pageY,20,o,p)):(y.push(d("lt "+c(360-F))),B>=20&&u.arc(x.pageX,x.pageY,20,p,o)),u.stroke(),i=Math.min(x.pageX-20,i),j=Math.min(x.pageY-20,j),k=Math.max(x.pageX+20,k),l=Math.max(x.pageY+20,l)}else y.push(d("turnto "+c(D)));y.push(d("fd "+c(B))),y.push("end at "+c(w.x)+", "+c(w.y)),u.strokeStyle="red",u.fillStyle="red",dd(u,2,x.pageX,x.pageY,w.pageX,w.pageY),i=Math.min(w.pageX,i),j=Math.min(w.pageY,j),k=Math.max(w.pageX,k),l=Math.max(w.pageY,l)}u.restore()}b.css({left:0,top:0}).html(y.join("<br>")).show();var G={left:"",top:"",right:"",bottom:""};w.pageX+5<x.pageX?G.left=Math.max(w.pageX-a(window).scrollLeft()-b.outerWidth()-5,2):G.left=Math.min(w.pageX-a(window).scrollLeft()+5,a(document).width()-b.outerWidth()-2),w.pageY+5<x.pageY?G.top=Math.max(w.pageY-a(window).scrollTop()-b.outerHeight()-5,2):G.top=Math.min(w.pageY-a(window).scrollTop()+5,a(document).height()-b.outerHeight()-2),b.css(G)}else y=[],e(b,q)&&y.push('<span style="color:red">click to use</span>'),null!=q.x&&y.push(q.x+", "+q.y),b.html(y.join("<br>")).css({left:"",top:"",right:0,bottom:0}).show()})}}();var ve=null,we="see",xe="0.2",ye=Ue(we),ze="position:relative;display:block;font-family:monospace;font-size:16px;word-break:break-all;margin-bottom:3px;padding-left:1em;",Ae=5,Be=!1,Ce="body",De=!1;try{De=window.self!==window.top&&screen.width>=800&&screen.height>=600&&parent&&parent.ide&&parent.ide.getOptions().panel}catch(a){}var Ee,Fe="",Ge=null,He="_loghistory",Ie=50,Je="",Ke={"":{e:window.eval,t:window},top:{e:window.eval,t:window}},Le=window.CoffeeScript,Me="(function(){return eval(arguments[0]);})",Qe="[_$a-zA-Z-][_$a-zA-Z0-9-]*",Re=new RegExp("^\\s*var\\s+(?:"+Qe+"\\s*,\\s*)*"+Qe+"\\s*;\\s*"),Ye="input._log:focus{outline:none;}samp._logcaret{position:absolute;left:0;font-size:120%;}samp._logcaret:before{content: '>'}label._log > span:first-of-type:hover{text-decoration:underline;}samp._log > label._log,samp_.log > span > label._log{display:inline-block;vertical-align:top;}label._log > span:first-of-type{margin-left:2em;text-indent:-1em;}label._log > ul{display:none;padding-left:14px;margin:0;}label._log > span:before{content:'';font-size:70%;font-style:normal;display:inline-block;width:0;text-align:center;}label._log > span:first-of-type:before{content:'\\0025B6';}label._log > ul > li{display:block;white-space:pre-line;margin-left:2em;text-indent:-1em}label._log > ul > li > samp{margin-left:-1em;text-indent:0;white-space:pre;}label._log > input[type=checkbox]:checked ~ span{margin-left:2em;text-indent:-1em;}label._log > input[type=checkbox]:checked ~ span:first-of-type:before{content:'\\0025BC';}label._log > input[type=checkbox]:checked ~ span:before{content:'';}label._log,label._log > input[type=checkbox]:checked ~ ul{display:block;}label._log > span:first-of-type,label._log > input[type=checkbox]:checked ~ span{display:inline-block;}label._log > input[type=checkbox],label._log > input[type=checkbox]:checked ~ span > span{display:none;}",Ze=!1,$e={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","'":"\\'",'"':'\\"',"\\":"\\\\"},_e=null,af=[];Ee=function(){Ge&&"function"==typeof Ge.log&&Ge.log.apply(window.console,arguments);var b=Array.prototype.slice.call(arguments);for(af.push('<samp class="_log">');b.length;){var c=b.shift();"String"==cf(c)?af.push(pf(c)):af.push(tf(c,Ae,af)),b.length&&af.push(" ")}af.push("</samp>"),wf()};var xf=!1,yf=null,zf=[{}.undefined],Af=null,Jf=null}}(jQuery);